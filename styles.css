/* --- Force Hide Profile Chip and Group While Searching on Mobile --- */
@media (max-width: 600px) {
    body.searching .auth-chip,
    body.searching .auth-group,
    body.searching .auth-chip[style*="display: block"],
    body.searching .auth-chip[style*="display:block"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        z-index: 0 !important;
        position: absolute !important;
        top: -9999px !important;
        left: -9999px !important;
        width: 1px !important;
        height: 1px !important;
    }
}
/* --- Hide Profile Chip While Searching on Mobile --- */
@media (max-width: 600px) {
    body.searching .auth-chip {
        display: none !important;
    }
}
/* --- Mobile Profile Chip (auth-chip) Fix --- */
@media (max-width: 600px) {
    .auth-chip {
        max-width: 120px;
        font-size: 15px;
        margin: 4px 2px 0 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    .nav-actions {
        flex-wrap: wrap;
        row-gap: 6px;
    }
}
/* --- Mobile Nav Menu Slide/Dropdown --- */
@media (max-width: 600px) {
    .nav-menu {
        position: absolute;
        top: 60px;
        left: 0;
        width: 100vw;
        background: #fff;
        box-shadow: 0 4px 16px rgba(0,0,0,0.07);
        z-index: 2000;
        display: none;
        flex-direction: column;
        align-items: stretch;
        padding: 18px 0 12px 0;
        border-bottom: 2px solid #eee;
        transition: all 0.25s cubic-bezier(.4,0,.2,1);
    }
    .nav-menu.open {
        display: flex;
    }
    .nav-links {
        flex-direction: column;
        gap: 10px;
        width: 100%;
        align-items: flex-start;
        padding-left: 18px;
    }
    .nav-link {
        width: 100%;
        padding: 10px 0 10px 0;
        font-size: 18px;
        border: none;
        background: none;
        text-align: left;
    }
}
/* --- Mobile Menu Toggle Fix --- */
@media (max-width: 600px) {
    .nav-actions {
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 10px;
    }
    .menu-toggle {
        display: flex !important;
        align-items: center;
        justify-content: center;
        min-width: 44px;
        min-height: 44px;
        margin-left: 8px;
        z-index: 1003;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .menu-toggle span {
        background: #000;
    }
}
/* --- Mobile Search Bar/Logo Overlap Fix --- */
@media (max-width: 600px) {
    .search-wrap {
        margin-top: 8px;
        z-index: 20;
        position: relative;
    }
    .logo {
        display: block;
        margin: 0 auto 2px auto;
        text-align: center;
        z-index: 30;
        position: relative;
    }
    .nav-brand {
        width: 100%;
        justify-content: center;
        align-items: flex-start;
        z-index: 30;
        position: relative;
    }
    .search-suggestions {
        z-index: 1002;
    }
}
/* --- Mobile Header/Actions Fix --- */
@media (max-width: 600px) {
    .navbar .container {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
        padding: 0 6px;
    }
    .nav-brand {
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .logo {
        font-size: 22px;
        padding: 0 4px;
    }
    .nav-actions {
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 4px;
        flex-wrap: wrap;
    }
    .nav-actions > * {
        margin: 0 2px;
    }
    .menu-toggle {
        margin-left: auto;
    }
    .auth-chip, .cart-btn, .theme-btn, .search-wrap {
        min-width: 44px;
        min-height: 44px;
        font-size: 15px;
    }
    .search-wrap {
        flex: 1 1 100%;
        max-width: 100%;
        margin: 8px 0 0 0;
    }
}
/* --- Enhanced Mobile Footer & Container Responsiveness --- */
@media (max-width: 900px) {
    .footer-content {
        grid-template-columns: 1fr 1fr;
        gap: 24px;
    }
}

@media (max-width: 600px) {
    .footer-content {
        grid-template-columns: 1fr;
        gap: 18px;
        text-align: center;
    }
    .footer-section {
        margin-bottom: 18px;
    }
    .footer-section h4 {
        font-size: 16px;
        margin-bottom: 10px;
    }
    .footer-section ul li {
        margin-bottom: 8px;
    }
    .footer-bottom {
        padding-top: 14px;
        font-size: 13px;
    }
    .social-links {
        justify-content: center;
        gap: 10px;
    }
    .container {
        padding: 0 8px;
    }
}
/* Size Guide link + popover */
.modal-options .option-label { display: flex; align-items: center; gap: 10px; }
.size-guide-link { font-size: 12px; padding: 4px 8px; border: 2px solid #000; background: #fff; border-radius: 6px; cursor: pointer; transition: transform .1s ease; }
.size-guide-link:hover { transform: translateY(-1px); }
.option-group { position: relative; }

.size-guide-popover { position: fixed; width: 320px; background: #fff; border: 3px solid #000; box-shadow: 6px 6px 0 rgba(0,0,0,0.2); border-radius: 12px; padding: 10px 0 8px; z-index: 100001; display: none; max-height: 55vh; overflow: auto; transform-origin: top right; animation: sg-pop-in .12s ease-out; }
.size-guide-popover.open { display: block; }
.size-guide-popover::after { content: ""; position: absolute; top: -10px; right: 24px; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-bottom: 10px solid #000; }
.size-guide-popover::before { content: ""; position: absolute; top: -7px; right: 24px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 8px solid #fff; }

.size-guide-popover .popover-header { position: sticky; top: 0; background: inherit; z-index: 2; display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; padding-right: 56px; border-bottom: 2px dashed #000; font-weight: 700; }
.size-guide-popover .popover-close { position: absolute; top: 8px; right: 20px; border: 2px solid #000; background: #fff; width: 36px; height: 36px; line-height: 32px; border-radius: 10px; cursor: pointer; z-index: 3; padding: 2px; }
.size-guide-popover .popover-close:hover { background: #000; color: #fff; }
.size-guide-popover .popover-close:focus { outline: 3px solid #000; outline-offset: 2px; }

/* Segmented tabs container */
.size-guide-popover .popover-tabs { display: inline-flex; gap: 0; padding: 8px 12px; position: sticky; top: 44px; background: inherit; z-index: 1; border: 2px solid #000; border-radius: 999px; overflow: hidden; margin: 6px 12px; }
.size-guide-popover .tab-btn { font-size: 12px; padding: 6px 14px; border: none; background: #fff; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; }
.size-guide-popover .tab-btn.active { background: #000; color: #fff; }

.size-guide-popover .popover-body { padding: 10px 12px 12px; }
.size-guide-popover .size-row { display: flex; justify-content: space-between; gap: 10px; padding: 6px 0; font-size: 13px; border-bottom: 1px dotted #000; }
.size-guide-popover .size-row:last-child { border-bottom: none; }
.size-guide-popover .size-row strong { width: 36px; }
.size-guide-popover .size-note { margin-top: 10px; font-size: 12px; color: #444; }

/* Backdrop for size guide */
.size-guide-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.05); z-index: 99999; pointer-events: auto; }

/* Dark mode adjustments */
body.dark-mode .size-guide-link { background: #111; color: #fff; border-color: #fff; }
body.dark-mode .size-guide-popover { background: #111; color: #fff; border-color: #fff; box-shadow: 6px 6px 0 rgba(255,255,255,0.15); }
body.dark-mode .size-guide-popover .popover-header { border-bottom-color: #fff; }
body.dark-mode .size-guide-popover::before { border-bottom-color: #111; }
body.dark-mode .size-guide-popover::after { border-bottom-color: #fff; display: none; }
body.dark-mode .size-guide-backdrop { background: rgba(255,255,255,0.06); }

@keyframes sg-pop-in { from { opacity: 0; transform: translateY(-6px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-black: #000000;
    --primary-white: #ffffff;
    --accent-red: #ff0000;
    --header-height: 76px; /* used to offset in-page anchor scrolling */
    --gray-100: #f8f9fa;
    --gray-200: #e9ecef;
    --gray-300: #dee2e6;
    --gray-400: #ced4da;
    --gray-500: #adb5bd;
    --gray-900: #212529;
    --shadow-light: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-heavy: 0 8px 24px rgba(0, 0, 0, 0.2);
    --manga-border: 3px solid var(--primary-black);
    --transition-fast: 0.2s ease;
    --transition-smooth: 0.3s ease-out;
    /* Unified header control height to align search, theme, cart, and links */
    --header-control-height: 40px;
    /* Manga nav line styling */
    --nav-line-thickness: 2px;
    --nav-line-length: 26px;
    --nav-line-offset: 6px;
}

body {
    font-family: 'Noto Sans JP', sans-serif;
    line-height: 1.6;
    color: var(--primary-black);
    background-color: var(--primary-white);
    overflow-x: hidden;
}

.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 20px;
}

/* Loading Screen */
.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--primary-white);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.5s ease;
}

.manga-loader {
    text-align: center;
}

.speech-bubble {
    position: relative;
    background: var(--primary-white);
    border: var(--manga-border);
    border-radius: 20px;
    padding: 20px 30px;
    font-weight: 700;
    font-size: 18px;
    animation: pulse 1.5s infinite;
}

.speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 30px;
    width: 0;
    height: 0;
    border: 15px solid transparent;
    border-top: 15px solid var(--primary-black);
}

.speech-bubble::before {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 32px;
    width: 0;
    height: 0;
    border: 13px solid transparent;
    border-top: 13px solid var(--primary-white);
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

/* Header Styles */
.header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: var(--primary-white);
    border-bottom: var(--manga-border);
    z-index: 1000;
    transition: var(--transition-smooth);
}

.navbar {
    padding: 15px 0;
}

.navbar .container {
    display: flex;
    align-items: center;
    justify-content: space-between; /* brand left, nav center (if present), actions right */
    gap: clamp(20px, 4vw, 56px);
    position: relative;
    /* account for platform scrollbar width to avoid clipping profile chip */
    padding-right: calc(18px + var(--scrollbar-gap, 0px));
}

/* Removed header rail to reduce clutter for a world-class minimal look */

.nav-brand {
    position: relative;
    margin: 0; /* reset nudges to keep within container */
}

/* Make brand link look like the original logo without underline */
.nav-brand .brand-link { text-decoration: none; color: inherit; display: inline-block; position: relative; }
.nav-brand .brand-link:focus { outline: 2px dashed var(--primary-black); outline-offset: 4px; }
.nav-brand .brand-link:hover { text-decoration: none; }

.logo {
    font-size: 28px;
    font-weight: 900;
    color: var(--primary-black);
    position: relative;
    z-index: 2;
}

.logo-accent {
    position: absolute;
    top: 5px;
    left: 5px;
    width: 100%;
    height: 100%;
    background: var(--accent-red);
    z-index: 1;
    transform: skew(-5deg);
}

.nav-menu ul {
    display: flex;
    list-style: none;
    gap: 24px; /* balanced spacing between links, avoids overflow */
    justify-content: center; /* center links within nav area */
}

/* Center the menu between brand and actions */
.nav-menu { margin: 0; justify-self: center; }

/* Right-side actions: search, theme, cart */
.nav-actions { display: flex; align-items: center; gap: 12px; justify-self: end; min-width: 0; }
.auth-group{display:inline-flex; align-items:center; gap:8px;}
.auth-chip{border:3px solid var(--primary-black); background:#fff; color: var(--primary-black); padding:6px 12px; border-radius:999px; font-weight:900; max-width:280px; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; display:inline-flex; align-items:center; gap:10px; position:relative; transition: transform .15s ease, box-shadow .15s ease, background-color .15s ease, color .15s ease; cursor:pointer; text-decoration:none}
.auth-chip::before{ content:""; position:absolute; inset:0; background: linear-gradient(110deg, transparent 0%, rgba(255,255,255,.35) 45%, rgba(255,255,255,.7) 50%, rgba(255,255,255,.35) 55%, transparent 100%); transform: translateX(-120%); transition: transform .5s ease; border-radius:inherit; pointer-events:none; }
.auth-chip:hover{ transform: translateY(-2px); background: var(--primary-black); color: var(--primary-white); box-shadow: 6px 6px 0 0 var(--primary-black); }
.dark-mode .auth-chip{ border-color: var(--primary-black); background: var(--primary-white); color: var(--primary-black); }
.dark-mode .auth-chip:hover{ background: var(--primary-black); color: var(--primary-white); }
.auth-chip:hover::before{ transform: translateX(120%); }
.auth-chip:active{ transform: translateY(0); box-shadow: 3px 3px 0 0 var(--primary-black); }
.auth-chip:focus-visible{ outline: 3px solid var(--accent-red); outline-offset: 3px; }

/* Hide the explicit logout button in the header (owner requested). Keep the profile chip visible. */
.auth-logout{ display:none !important; }

/* Ensure long names are visible on narrow viewports without breaking layout */
@media (max-width: 760px) {
    .auth-chip{ max-width:160px; padding:6px 8px; gap:8px; }
    .search-wrap{ max-width:220px; min-width:160px; }
}

/* Keep search from pushing outside; allow slight shrink */
.search-wrap { flex: 0 1 240px; max-width: 260px; min-width: 160px; }

/* Prevent auth-chip from shrinking on wide screens */
.auth-group { flex-shrink: 0; }

/* Give the profile chip an explicit right margin (plus measured scrollbar gap)
     so the last character never sits under the OS scrollbar on laptops/desktops. */
.auth-chip {
    margin-right: calc(12px + var(--scrollbar-gap, 0px));
    z-index: 1200; /* ensure it sits above header elements if needed */
}

/* Allow header children to overflow slightly so the chip doesn't get clipped */
.navbar { overflow: visible; }

.nav-link {
    text-decoration: none;
    color: var(--primary-black);
    font-weight: 500;
    padding: 0 15px;
    height: var(--header-control-height);
    display: inline-flex;
    align-items: center;
    border: 2px solid transparent;
    transition: var(--transition-fast);
    position: relative;
}

/* L-shaped manga connector (top-left) for nav links */
.nav-link::before {
    content: '';
    position: absolute;
    top: 6px; /* bring inside the link box */
    left: 6px; /* bring inside the link box */
    width: 14px; /* shorter, refined */
    height: 14px; /* shorter, refined */
    background:
        linear-gradient(var(--primary-black), var(--primary-black)) top left / 100% var(--nav-line-thickness) no-repeat,
        linear-gradient(var(--primary-black), var(--primary-black)) top left / var(--nav-line-thickness) 100% no-repeat;
    opacity: 0;
    transition: opacity var(--transition-fast);
    pointer-events: none;
}

.nav-link:hover::before,
.nav-link.active::before { opacity: 1; }

.nav-link:hover,
.nav-link.active {
    border: 2px solid var(--primary-black);
    background: var(--primary-white);
}

/* Removed red square accent on active nav links */

.nav-actions {
    display: flex;
    align-items: center;
    gap: 15px;
}

.search-btn,
.cart-btn,
.theme-btn {
    background: none;
    border: 2px solid var(--primary-black);
    height: var(--header-control-height);
    width: var(--header-control-height);
    padding: 0;
    cursor: pointer;
    transition: var(--transition-fast);
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.search-btn:hover,
.cart-btn:hover,
.theme-btn:hover {
    background: var(--primary-black);
    color: var(--primary-white);
}

.theme-btn { font-size: 16px; line-height: 1; }
/* Clean moon icon; remove image filters to avoid glow/blur */
.theme-btn .theme-icon { display:inline-block; transition: transform var(--transition-smooth); }
.theme-btn:hover .theme-icon { transform: rotate(-12deg) scale(1.05); }
/* Preference UI (RM/CUR) removed */
.pref-group{ display:none !important; }
.pref-btn{ display:none !important; }

.cart-btn {
    position: relative;
}

.cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--accent-red);
    color: var(--primary-white);
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    border: 2px solid var(--primary-white);
}

.menu-toggle {
    display: none;
    flex-direction: column;
    background: none;
    border: 2px solid var(--primary-black);
    padding: 8px;
    cursor: pointer;
    gap: 3px;
}

.menu-toggle span {
    width: 20px;
    height: 2px;
    background: var(--primary-black);
    transition: var(--transition-fast);
}

/* Removed sound toggle button */

/* Search Bar */
.search-wrap {
    position: relative;
    display: flex;
    align-items: center;
    border: var(--manga-border);
    background: var(--primary-white);
    min-width: 260px;
    max-width: 360px;
    height: var(--header-control-height);
}

.search-input {
    border: none;
    outline: none;
    padding: 10px 36px 10px 44px; /* extra left space for icon button width */
    width: 100%;
    font-weight: 600;
    color: var(--primary-black);
    background: transparent;
}

.search-icon-btn {
    position: absolute;
    top: 0;
    left: 0;
    width: 36px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--primary-black);
    padding: 0;
}

.search-icon-btn svg{ display:block; }

/* Using native search clear; custom .search-clear removed */

.search-suggestions {
    position: absolute;
    top: 100%;
    left: -3px;
    right: -3px;
    background: var(--primary-white);
    border: var(--manga-border);
    border-top: none;
    list-style: none;
    z-index: 1002;
    max-height: 280px;
    overflow-y: auto;
    display: none;
}

.search-suggestions.open {
    display: block;
}

.suggestion-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    cursor: pointer;
    border-top: 2px solid var(--gray-200);
}

.suggestion-item:first-child {
    border-top: none;
}

.suggestion-item:hover,
.suggestion-item.active {
    background: var(--gray-100);
}

.suggestion-emoji {
    font-size: 18px;
}

.suggestion-text { flex: 1; }
.suggestion-name { font-weight: 700; color: var(--primary-black); font-size: 14px; }
.suggestion-desc { font-size: 12px; color: var(--gray-500); }
.suggestion-price { font-weight: 900; color: var(--accent-red); }

.suggestion-viewall {
    text-align: center;
    padding: 10px 12px;
    font-weight: 700;
    cursor: pointer;
    border-top: 2px solid var(--gray-200);
    background: var(--primary-white);
}

.suggestion-viewall:hover { background: var(--gray-100); }

.search-banner {
    border: var(--manga-border);
    background: var(--primary-white);
    padding: 12px 16px;
    margin: -20px 0 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.search-banner .banner-text { font-weight: 700; }
.search-banner .banner-clear { background: none; border: var(--manga-border); padding: 6px 10px; cursor: pointer; }

/* Breadcrumbs */
.breadcrumbs{display:flex;gap:8px;align-items:center;justify-content:flex-start;margin:10px 0 16px;border:3px solid var(--primary-black);border-radius:10px;padding:8px 12px;background:var(--primary-white);box-shadow:6px 6px 0 0 var(--primary-black)}
.breadcrumbs a{color:var(--primary-black);text-decoration:none;font-weight:800}
.breadcrumbs .crumb-sep{opacity:.5}
.breadcrumbs .crumb-current{font-weight:900;color:var(--accent-red)}

/* Dark mode adjustments for search */
body.dark-mode .search-suggestions,
body.dark-mode .search-wrap,
body.dark-mode .search-banner { background: var(--primary-white); }

/* Manga-styled highlight for matches */
.search-suggestions mark,
.product-grid mark,
.search-banner mark {
    background: linear-gradient(135deg, rgba(255,0,0,0.08) 0%, rgba(255,0,0,0.16) 100%);
    color: var(--primary-black);
    border: 2px solid var(--primary-black);
    border-radius: 3px;
    padding: 0 3px;
    box-shadow: 3px 3px 0 0 var(--accent-red);
}

body.dark-mode .search-suggestions mark,
body.dark-mode .product-grid mark,
body.dark-mode .search-banner mark {
    background: linear-gradient(135deg, rgba(255,68,68,0.12) 0%, rgba(255,68,68,0.22) 100%);
    box-shadow: 3px 3px 0 0 var(--accent-red);
}

/* Hero Section */
.hero {
    padding: 120px 0 80px;
    background: var(--primary-white);
    position: relative;
    overflow: hidden;
}

/* Ensure in-page anchors (like #home) account for fixed header */
section[id] { scroll-margin-top: calc(var(--header-height) + 12px); }

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 20% 20%, rgba(0,0,0,0.03) 1px, transparent 1px),
        radial-gradient(circle at 80% 80%, rgba(0,0,0,0.03) 1px, transparent 1px);
    background-size: 50px 50px;
}

.hero-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
    position: relative;
    z-index: 2;
}

.manga-text-bubble {
    position: relative;
    background: var(--primary-white);
    border: var(--manga-border);
    padding: 40px;
    margin-bottom: 30px;
    border-radius: 20px;
}

.manga-text-bubble::after {
    content: '';
    position: absolute;
    bottom: -20px;
    left: 40px;
    width: 0;
    height: 0;
    border: 20px solid transparent;
    border-top: 20px solid var(--primary-black);
}

.manga-text-bubble::before {
    content: '';
    position: absolute;
    bottom: -16px;
    left: 43px;
    width: 0;
    height: 0;
    border: 17px solid transparent;
    border-top: 17px solid var(--primary-white);
}

.hero-title {
    font-size: 48px;
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 20px;
}

.title-main {
    display: block;
    color: var(--primary-black);
}

.title-accent {
    display: inline-block;
    color: var(--accent-red);
    position: relative;
    padding: 2px 10px;
    transform: rotate(-0.25deg);
}
.title-accent::before {
    /* Paper tag behind the red text */
    content: '';
    position: absolute; inset: 6px -12px -6px -12px; z-index: -1;
    background: var(--primary-white);
    border: var(--manga-border);
    transform: rotate(0.4deg);
    box-shadow: 3px 3px 0 0 var(--primary-black);
    /* subtle halftone texture */
    background-image:
      radial-gradient(circle at 20% 30%, rgba(0,0,0,0.04) 1px, transparent 1px),
      radial-gradient(circle at 75% 70%, rgba(0,0,0,0.04) 1px, transparent 1px);
    background-size: 26px 26px;
}
.title-accent::after { content: none; }

/* Home hero: remove speech-bubble pointer triangle */
.hero:not(.about-hero) .manga-text-bubble::after,
.hero:not(.about-hero) .manga-text-bubble::before { display: none; }

.hero-subtitle {
    font-size: 18px;
    color: var(--gray-700);
    margin-bottom: 0;
}

/* Inked style variant for punchy Japanese subtitle */
.hero-subtitle.inked {
    color: var(--primary-black);
    font-weight: 900;
    letter-spacing: 0.5px;
    font-size: 19px;
    /* subtle ink spread via text shadows */
    text-shadow: 0.8px 0.8px 0 var(--primary-black), 1.5px 1.5px 0 rgba(0,0,0,0.18);
    /* prefer brush-like JP fonts, fallback to Noto Sans JP and system */
    font-family: 'Sawarabi Mincho', 'Kosugi Maru', 'Noto Sans JP', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", sans-serif;
}

.hero-actions {
    display: flex;
    gap: 20px;
    margin-top: 20px;
}

.btn {
    padding: 15px 30px;
    border: var(--manga-border);
    background: var(--primary-white);
    color: var(--primary-black);
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: var(--transition-fast);
    text-decoration: none;
    display: inline-block;
}

.btn-primary {
    background: var(--primary-black);
    color: var(--primary-white);
}

.btn-primary:hover {
    background: var(--accent-red);
    border-color: var(--accent-red);
}

.btn-secondary {
    background: var(--primary-white);
    color: var(--primary-black);
}

.btn-secondary:hover {
    background: var(--primary-black);
    color: var(--primary-white);
}

.btn-outline {
    background: transparent;
    border: var(--manga-border);
    color: var(--primary-black);
}

.btn-outline:hover {
    background: var(--primary-black);
    color: var(--primary-white);
}

.btn-effect {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s;
}

.btn:hover .btn-effect {
    left: 100%;
}

.hero-visual {
    position: relative;
}

.manga-panel {
    position: relative;
    background: var(--primary-white);
    border: var(--manga-border);
    padding: 40px;
    transform: rotate(-2deg);
    box-shadow: var(--shadow-heavy);
}

.panel-border {
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border: 2px solid var(--accent-red);
    transform: rotate(1deg);
}

.speed-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(45deg, transparent 40%, rgba(0,0,0,0.1) 45%, rgba(0,0,0,0.1) 55%, transparent 60%),
        linear-gradient(-45deg, transparent 40%, rgba(0,0,0,0.1) 45%, rgba(0,0,0,0.1) 55%, transparent 60%);
    background-size: 20px 20px;
    opacity: 0.3;
}

.hero-product {
    height: 300px;
    background: var(--gray-100);
    border: var(--manga-border);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}
.hero-product .hero-image{position:absolute; inset:auto; max-width:82%; max-height:82%; object-fit:contain; z-index: 2; filter: contrast(1.05) saturate(0.9); image-rendering: auto; transition: transform .25s ease, opacity .6s ease; mix-blend-mode: multiply; opacity: .98;}
.hero-product .hero-image-1{transform: translateX(-4%) translateY(1%) rotate(-0.6deg); z-index: 2;}
.hero-product .hero-image-3{max-width:90%; max-height:90%; opacity:.9; transform: translateX(2%) translateY(-3%) scale(1.01); z-index: 1;}
.hero-product .sound-effect{z-index:3}

/* Dark mode: invert + screen blend so white bg vanishes and strokes glow on dark */
body.dark-mode .hero-product .hero-image{mix-blend-mode: screen; filter: invert(1) grayscale(1) contrast(1.1) brightness(0.95); opacity: .92;}

/* Hero slideshow: smooth two-image crossfade */
.hero-slideshow{--slideDur: 10s}
.hero-slideshow .hero-image{opacity:0; animation: heroFade2 var(--slideDur) ease-in-out infinite;}
.hero-slideshow .hero-image-1{animation-delay: 0s}
.hero-slideshow .hero-image-3{animation-delay: calc(var(--slideDur) / 2)}
@keyframes heroFade2{
    0%{opacity:0}
    10%{opacity:1}
    40%{opacity:1}
    50%{opacity:0}
    100%{opacity:0}
}
.hero-slideshow:hover .hero-image{animation-play-state: paused}

.product-spotlight {
    width: 150px;
    height: 150px;
    background: var(--accent-red);
    border-radius: 50%;
    opacity: 0.1;
    animation: spotlight 3s ease-in-out infinite;
}

/* Manga Sound Effects */
.sound-effect {
    position: absolute;
    font-weight: 900;
    font-size: 24px;
    color: var(--accent-red);
    -webkit-text-stroke: 2px var(--primary-black);
    animation: soundPop 2s ease-in-out infinite;
    z-index: 10;
}

.sound-effect.pow {
    top: 20px;
    left: 20px;
    animation-delay: 0s;
    transform: rotate(-15deg);
}

.sound-effect.boom {
    top: 50px;
    right: 30px;
    animation-delay: 0.5s;
    transform: rotate(10deg);
}

.sound-effect.wow {
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%) rotate(-5deg);
    animation-delay: 1s;
}

/* Floating Stars */
.floating-star {
    position: absolute;
    font-size: 20px;
    animation: float 3s ease-in-out infinite;
    z-index: 5;
}

.floating-star.star-1 {
    top: 30px;
    right: 50px;
    animation-delay: 0s;
}

.floating-star.star-2 {
    bottom: 60px;
    right: 20px;
    animation-delay: 1s;
}

.floating-star.star-3 {
    top: 60%;
    left: 30px;
    animation-delay: 2s;
}

/* Manga-style chips for floating SFX */
.floating-sfx{font-weight:900;color:var(--accent-red);-webkit-text-stroke:2px var(--primary-black);letter-spacing:.5px;background:#fff;border:3px solid var(--primary-black);border-radius:10px;padding:4px 8px;box-shadow:6px 6px 0 0 var(--primary-black)}

/* Action Lines */
.action-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(45deg, transparent 48%, var(--primary-black) 49%, var(--primary-black) 51%, transparent 52%),
        linear-gradient(-45deg, transparent 48%, var(--primary-black) 49%, var(--primary-black) 51%, transparent 52%);
    background-size: 30px 30px;
    opacity: 0.1;
    animation: actionSlide 4s ease-in-out infinite;
}

@keyframes spotlight {
    0%, 100% { transform: scale(1); opacity: 0.1; }
    50% { transform: scale(1.2); opacity: 0.2; }
}

@keyframes soundPop {
    0%, 100% { transform: scale(1) rotate(var(--rotation, 0deg)); opacity: 0.7; }
    50% { transform: scale(1.2) rotate(var(--rotation, 0deg)); opacity: 1; }
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    33% { transform: translateY(-10px) rotate(5deg); }
    66% { transform: translateY(5px) rotate(-3deg); }
}

@keyframes actionSlide {
    0% { background-position: 0px 0px; }
    100% { background-position: 30px 30px; }
}

@keyframes parallaxFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

@keyframes glow {
    0%, 100% { box-shadow: 0 0 5px var(--accent-red); }
    50% { box-shadow: 0 0 20px var(--accent-red), 0 0 30px var(--accent-red); }
}

/* Products Section */
.products {
    padding: 80px 0;
    background: var(--primary-white);
}

.section-header {
    text-align: center;
    margin-bottom: 32px;
    position: relative;
}

.section-title {
    font-size: 42px;
    font-weight: 900;
    margin-bottom: 20px;
    position: relative;
    display: inline-block;
}

.title-underline {
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--accent-red);
    transform: skew(-5deg);
}

.manga-dots {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.manga-dots::before,
.manga-dots::after {
    content: '•';
    font-size: 24px;
    color: var(--primary-black);
}

.filter-tabs {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 40px;
    flex-wrap: wrap;
}

/* Facet bar */
.facet-bar{display:flex;flex-wrap:wrap;gap:14px;align-items:center;justify-content:center;margin-bottom:24px;border:3px solid var(--primary-black);padding:12px 14px;border-radius:12px;background:var(--primary-white);box-shadow:6px 6px 0 0 var(--primary-black)}
.facet-bar .facet-group{display:flex;gap:8px;align-items:center}
.facet-bar label{font-weight:800;font-size:13px}
.facet-bar input[type=range]{accent-color:var(--accent-red)}
.facet-bar select{border:3px solid var(--primary-black);background:#fff;border-radius:8px;padding:6px}

.filter-tab {
    padding: 10px 20px;
    border: 2px solid var(--primary-black);
    background: var(--primary-white);
    color: var(--primary-black);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
}

.filter-tab:hover,
.filter-tab.active {
    background: var(--primary-black);
    color: var(--primary-white);
}

.filter-tab.active {
    position: relative;
}

.filter-tab.active::after {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background: var(--accent-red);
}

.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-bottom: 50px;
}

.product-card {
    background: var(--primary-white);
    border: var(--manga-border);
    padding: 20px;
    transition: var(--transition-smooth);
    position: relative;
    overflow: hidden;
}

/* Badges */
.badge{position:absolute;top:10px;left:10px;background:#fff;border:3px solid var(--primary-black);padding:4px 8px;border-radius:8px;font-weight:900;box-shadow:5px 5px 0 0 var(--primary-black)}
.badge.sale{color:#fff;background:var(--accent-red);}
.badge.limited{background:#ffe9e9}
.badge.bestseller{background:#fff8cc}
.badge.soldout{background:#ddd;color:#555}

/* Wishlist heart */
.wish-btn{position:absolute;top:10px;right:10px;border:3px solid var(--primary-black);background:#fff;border-radius:50%;width:36px;height:36px;display:grid;place-items:center;cursor:pointer;box-shadow:4px 4px 0 0 var(--primary-black)}
.wish-btn.active{background:var(--accent-red);color:#fff}

/* Compare button active state */
.compare-btn.active{background: var(--primary-black); color: var(--primary-white);}

/* Quick add panel */
.quick-add{margin-top:10px;border-top:2px dashed var(--primary-black);padding-top:10px;display:grid;gap:8px}
.quick-add .size-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
.quick-add .size-pill{width:100%;min-width:0}
.quick-add .qty-row{justify-content:flex-start}

/* Carousel */
.carousel{display:grid;grid-auto-flow:column;grid-auto-columns:300px;gap:16px;overflow-x:auto;padding:4px}
.carousel .product-card{min-width:300px}
@media (max-width: 800px){
    .carousel{grid-auto-columns:280px}
    .carousel .product-card{min-width:280px}
}
@media (max-width: 560px){
    .carousel{grid-auto-columns:260px}
    .carousel .product-card{min-width:260px}
}
/* Smooth fade for live Trending swaps */
#trending-wrap{ transition: opacity .28s ease, transform .28s ease; will-change: opacity, transform; }
#trending-wrap.rotating{ opacity: 0; transform: translateY(6px); }

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-heavy);
}

.product-card::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: var(--accent-red);
    z-index: -1;
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.product-card:hover::before {
    opacity: 1;
}

.product-image {
    height: 200px;
    background: var(--gray-100);
    border: 2px solid var(--primary-black);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    position: relative;
    overflow: hidden;
}
.product-image img{width: 100%; height: 100%; object-fit: cover; display: block; filter: contrast(1.05) saturate(.98);} 

/* Hover crossfade support: when a card has two images, stack and fade */
.product-image.hover-enabled { position: relative; }
.product-image.hover-enabled img { position: absolute; inset: 0; }
.product-image.hover-enabled .img-primary { opacity: 1; transition: opacity .28s ease, transform .28s ease; }
.product-image.hover-enabled .img-secondary { opacity: 0; transition: opacity .28s ease, transform .28s ease; }
.product-image.hover-enabled:hover .img-primary { opacity: 0; transform: scale(1.02); }
.product-image.hover-enabled:hover .img-secondary { opacity: 1; transform: scale(1.01); }

@media (prefers-reduced-motion: reduce) {
    .product-image.hover-enabled .img-primary,
    .product-image.hover-enabled .img-secondary { transition: none; }
}

.product-image::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 25% 25%, rgba(0,0,0,0.04) 2px, transparent 2px),
        radial-gradient(circle at 75% 75%, rgba(0,0,0,0.04) 2px, transparent 2px);
    background-size: 25px 25px;
}

.product-info {
    position: relative;
    z-index: 2;
}

/* Sticker packs: show the entire sheet (no cropping) */
.product-card[data-category="stickers"] .product-image{ height: 220px; background:#fff; }
.product-card[data-category="stickers"] .product-image img{ object-fit: contain; object-position: center; }
.product-card[data-category="stickers"] .product-image::before{
    content: "";
    position: absolute; inset: 0;
    background: var(--thumb) center/cover no-repeat;
    filter: blur(10px) saturate(.9) brightness(1.02);
    transform: scale(1.06);
    opacity: .35;
}
.product-card[data-category="stickers"] .product-image::after{ display: none; }
@media (max-width: 900px){ .product-card[data-category="stickers"] .product-image{ height: 210px; } }
@media (max-width: 600px){ .product-card[data-category="stickers"] .product-image{ height: 200px; } }

/* Action Figures: bias framing to the top so heads/effects stay in view */
.product-card[data-category="figures"] .product-image{
        height: 260px; /* taller viewport for statues/figures */
        background: #fff; /* clean background to avoid visual noise */
}
.product-card[data-category="figures"] .product-image img{
    object-fit: cover;          /* fill container without white corners */
    object-position: top center;/* prioritize the top of the artwork */
}
.product-card[data-category="figures"] .product-image::after{ display: none; }

@media (max-width: 900px){
    .product-card[data-category="figures"] .product-image{ height: 230px; }
}
@media (max-width: 600px){
    .product-card[data-category="figures"] .product-image{ height: 210px; }
}

/* Clothing (tees/fashion): expand image area and show full garment */
.product-card[data-category="tees"] .product-image,
.product-card[data-category="fashion"] .product-image{
        height: 320px; /* larger viewport for clothing */
        background: #fff; /* plain background to avoid visual noise */
}
.product-card[data-category="tees"] .product-image img,
.product-card[data-category="fashion"] .product-image img{
    object-fit: cover; /* fill container, no white corners */
    object-position: top center; /* bias to top so heads remain visible */
}
.product-card[data-category="tees"] .product-image::after,
.product-card[data-category="fashion"] .product-image::after{ display: none; }

@media (max-width: 900px){
    .product-card[data-category="tees"] .product-image,
    .product-card[data-category="fashion"] .product-image{ height: 280px; }
}
@media (max-width: 600px){
    .product-card[data-category="tees"] .product-image,
    .product-card[data-category="fashion"] .product-image{ height: 240px; }
}

/* Frieren section: fill images fully inside cards (do not affect Blackpink) */
#frieren .product-image{ height: 280px; background:#fff; }
#frieren .product-image::after{ display: none; }
#frieren .product-image img{ width:100%; height:100%; object-fit: cover; object-position: center top; transform: scale(1.05); }
@media (max-width: 900px){ #frieren .product-image{ height: 240px; } }
@media (max-width: 600px){ #frieren .product-image{ height: 220px; } }

/* Mob Psycho section: make thumbnails full-bleed in cards */
#mobpsycho .product-image{ height: 280px; background:#fff; padding:0; }
#mobpsycho .product-image::after{ display: none; }
#mobpsycho .product-image img{ width:100%; height:100%; object-fit: cover; object-position: center; }
@media (max-width: 900px){ #mobpsycho .product-image{ height: 240px; } }
@media (max-width: 600px){ #mobpsycho .product-image{ height: 220px; } }

/* Land of the Lustrous section: full-bleed product thumbnails */
#lustrous .product-image{ height: 280px; background:#fff; padding:0; }
#lustrous .product-image::after{ display: none; }
#lustrous .product-image img{ width:100%; height:100%; object-fit: cover; object-position: center; }
@media (max-width: 900px){ #lustrous .product-image{ height: 240px; } }
@media (max-width: 600px){ #lustrous .product-image{ height: 220px; } }

.product-name {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--primary-black);
}

.product-price {
    font-size: 20px;
    font-weight: 900;
    color: var(--accent-red);
    margin-bottom: 15px;
}

/* Keep price readable when card hover overlay turns red */
.product-card:hover .product-price { color: #000; }

/* Pulse highlight when landing on a product from search */
.highlight-pulse {
    animation: pulseBorder 1.2s ease-out 1;
}
@keyframes pulseBorder {
    0% { box-shadow: 0 0 0 0 rgba(255,0,0,0.6); transform: scale(1.01); }
    60% { box-shadow: 0 0 0 8px rgba(255,0,0,0); transform: scale(1.005); }
    100% { box-shadow: 0 0 0 0 rgba(255,0,0,0); transform: scale(1); }
}

.product-price .original-price {
    text-decoration: line-through;
    color: var(--gray-400);
    font-size: 16px;
    margin-left: 10px;
}

.product-actions {
    display: grid;
    /* Let the third column (Compare) size to its content so text isn't clipped */
    grid-template-columns: 1fr 1fr auto;
    gap: 10px;
}

.btn-small {
    /* Slightly reduce horizontal padding to fit longer labels like “Compare” */
    padding: 8px 12px;
    font-size: 14px;
    flex: 1;
    width: 100%;
}
/* Prevent Compare label from wrapping and getting squeezed */
.product-actions .compare-btn { white-space: nowrap; }
/* Prevent button text from collapsing in narrow carousels */
.carousel .product-actions{ grid-template-columns: 1fr 1fr auto; }
.carousel .btn-small{ min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.btn-full {
    width: 100%;
}

.load-more-container {
    text-align: center;
}

/* Features Section */
.features {
    padding: 60px 0;
    background: var(--gray-100);
    border-top: var(--manga-border);
    border-bottom: var(--manga-border);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
}

.feature-panel {
    background: var(--primary-white);
    border: var(--manga-border);
    padding: 30px;
    text-align: center;
    position: relative;
    transition: var(--transition-smooth);
}

.feature-panel:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-medium);
}

/* Home features redesign: ink panel with inner texture and no red diamond */
.features:not(.about-features) .feature-panel { box-shadow: 8px 8px 0 0 var(--primary-black); padding: 34px 30px; }
.features:not(.about-features) .feature-panel:hover { transform: translateY(-6px) rotate(-0.3deg); box-shadow: 12px 12px 0 0 var(--primary-black); }
.features:not(.about-features) .feature-panel::after { display: none; }
.features:not(.about-features) .feature-panel::before {
    content: '';
    position: absolute; inset: 10px; pointer-events: none; border-radius: 6px;
    background-image:
      radial-gradient(circle at 20% 30%, rgba(0,0,0,0.05) 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, rgba(0,0,0,0.05) 1px, transparent 1px);
    background-size: 24px 24px; opacity: .08;
}
.features:not(.about-features) .feature-icon {
    width: 84px; height: 84px; line-height: 84px; margin: 0 auto 16px; display: grid; place-items: center;
    border: var(--manga-border); border-radius: 50%; background: var(--primary-white);
    box-shadow: 0 0 0 6px var(--primary-white), 0 0 0 9px var(--primary-black);
    font-size: 42px; filter: grayscale(1) contrast(2);
}
.features:not(.about-features) .feature-panel h3 { font-size: 22px; margin-bottom: 10px; }
.features:not(.about-features) .feature-panel p { color: var(--gray-500); max-width: 26ch; margin: 0 auto; }

.feature-icon {
    font-size: 48px;
    margin-bottom: 20px;
    filter: grayscale(1) contrast(2);
}

.feature-panel h3 {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--primary-black);
}

.feature-panel p {
    color: var(--gray-500);
    line-height: 1.5;
}

/* Testimonials Section */
.testimonials {
    padding: 80px 0;
    background: var(--primary-white);
    position: relative;
}

.testimonials::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(0,0,0,0.02) 1px, transparent 1px),
        radial-gradient(circle at 80% 90%, rgba(0,0,0,0.02) 1px, transparent 1px);
    background-size: 60px 60px;
}

.testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 40px;
    position: relative;
    z-index: 2;
}

.testimonial-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
    animation: none;
}

.testimonial-card:nth-child(2) {
    animation-delay: 2s;
}

.testimonial-card:nth-child(3) {
    animation-delay: 4s;
}

.character-avatar {
    position: relative;
    flex-shrink: 0;
    z-index: 2;
}

.avatar-img { width: 86px; height: 86px; border: var(--manga-border); border-radius: 50%; display:flex; align-items:center; justify-content:center; font-size: 36px; background: var(--primary-white); position:relative; z-index:2; }

.avatar-frame { position:absolute; top:-7px; left:-7px; width: 100px; height: 100px; border:3px solid var(--accent-red); border-radius:50%; z-index:1; }

.speech-bubble.testimonial { background: var(--primary-white); border: var(--manga-border); padding: 26px 28px; border-radius: 20px; position: relative; flex: 1; box-shadow: 6px 6px 0 0 var(--primary-black); }

/* Remove left pointer and add subtle texture + quote */
.testimonials .speech-bubble.testimonial::before { content: '“'; position:absolute; top: 14px; left: 14px; font-size: 42px; color: var(--accent-red); -webkit-text-stroke: 2px var(--primary-black); opacity: 0.16; line-height: 1; }
.testimonials .speech-bubble.testimonial::after { content:''; position:absolute; inset: 10px; pointer-events:none; background-image: radial-gradient(circle at 20% 30%, rgba(0,0,0,0.05) 1px, transparent 1px), radial-gradient(circle at 80% 70%, rgba(0,0,0,0.05) 1px, transparent 1px); background-size: 22px 22px; opacity: .06; border-radius: 12px; }

.speech-bubble.testimonial p { font-size: 18px; line-height: 1.7; margin-bottom: 16px; color: var(--primary-black); font-style: italic; }

.customer-name {
    font-weight: 700;
    color: var(--primary-black);
    margin-bottom: 5px;
}

.customer-rating { font-size: 18px; color: #2ecc71; filter: none; }

/* layout spacing tweaks */
.testimonials .speech-bubble.testimonial { margin-top: 10px; max-width: 560px; }
.testimonials-grid { align-items: start; }

/* Home testimonials: remove avatar circles */
.testimonials:not(.about-team) .character-avatar { display: none; }
.testimonials:not(.about-team) .speech-bubble.testimonial { margin-top: 0; }

/* About Team as product cards */
.about-team .team-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 32px;
}
.about-team .team-card { padding: 24px 24px 28px; }
.about-team .team-card .product-image {
        height: 280px;
        font-size: 100px; /* for emoji fallback */
        display: flex; align-items: center; justify-content: center;
}
.about-team .team-card .product-image img {
        width: 100%; height: 100%; object-fit: cover; display: block;
}
.about-team .team-card .product-info { padding-top: 10px; }
.about-team .team-card .product-name { font-size: 20px; margin-bottom: 8px; }
.about-team .team-card .team-quote { color: var(--gray-500); font-style: italic; line-height: 1.6; font-size: 16px; }

.about-team .team-social { display: flex; gap: 10px; margin-top: 12px; }
.about-team .team-social-link {
    display: inline-flex; align-items: center; justify-content: center;
    width: 36px; height: 36px; border-radius: 50%;
    border: var(--manga-border); background: var(--primary-white); color: var(--primary-black);
    text-decoration: none; font-size: 18px; transition: var(--transition-fast);
}
.about-team .team-social-link:hover { background: var(--primary-black); color: var(--primary-white); transform: translateY(-2px); }

.about-team .team-social-icon { width: 18px; height: 18px; display:block; filter: brightness(0); transition: var(--transition-fast); }
.about-team .team-social-link:hover .team-social-icon { filter: invert(1); }

@media (max-width: 768px) {
    .about-team .team-grid { gap: 24px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .about-team .team-card .product-image { height: 220px; font-size: 84px; }
}

/* Slight left nudge for profile group on desktop to avoid scrollbar overlap */
@media (min-width: 761px) {
    .auth-group { margin-right: 8px; transform: translateX(-6px); }
    .search-wrap { margin-left: -30px; }
}

@media (max-width: 480px) {
    .about-team .team-card .product-image { height: 180px; font-size: 72px; }
}

/* About Team: alternating layout and enhanced manga styling */
.about-team .testimonials-grid {
    position: relative;
}
.about-team .testimonial-card {
    align-items: center;
    gap: 24px;
}
.about-team .testimonial-card:nth-child(odd) { flex-direction: row; }
.about-team .testimonial-card:nth-child(even) { flex-direction: row-reverse; }

.about-team .avatar-img {
    width: 88px; height: 88px; border-radius: 50%; position: relative; z-index: 2;
}
.about-team .avatar-frame {
    top: -10px; left: -10px; width: 108px; height: 108px; border-width: 4px; border-color: var(--accent-red);
}
.about-team .character-avatar::after {
    content: '';
    position: absolute; inset: -6px; border-radius: 50%; pointer-events: none; z-index: 1;
    box-shadow: 0 0 0 3px var(--primary-black), 0 0 0 7px var(--primary-white), 0 0 0 11px var(--accent-red);
}

.about-team .speech-bubble.testimonial {
    border-radius: 22px; padding: 28px; position: relative; overflow: hidden;
}
.about-team .speech-bubble.testimonial::after,
.about-team .speech-bubble.testimonial::before { top: 50%; transform: translateY(-50%); }
.about-team .testimonial-card:nth-child(odd) .speech-bubble.testimonial::after { left: -24px; border-right-color: var(--primary-black); }
.about-team .testimonial-card:nth-child(odd) .speech-bubble.testimonial::before { left: -20px; border-right-color: var(--primary-white); }
.about-team .testimonial-card:nth-child(even) .speech-bubble.testimonial::after { right: -24px; left: auto; border-left: 20px solid var(--primary-black); border-right: none; }
.about-team .testimonial-card:nth-child(even) .speech-bubble.testimonial::before { right: -20px; left: auto; border-left: 17px solid var(--primary-white); border-right: none; }

.about-team .speech-bubble.testimonial::after {
    /* inner halftone texture */
    content: '';
    position: absolute; inset: 0; opacity: 0.08; pointer-events: none;
    background-image: radial-gradient(circle at 25% 30%, currentColor 1px, transparent 1px),
                      radial-gradient(circle at 75% 70%, currentColor 1px, transparent 1px);
    background-size: 18px 18px; color: var(--primary-black);
}

.about-team .speech-bubble.testimonial:hover { box-shadow: var(--shadow-medium); transform: translateY(-3px); transition: transform .2s ease, box-shadow .2s ease; }

@media (max-width: 768px) {
  .about-team .testimonials-grid { grid-template-columns: 1fr; }
  .about-team .testimonial-card { flex-direction: column !important; text-align: center; }
  .about-team .speech-bubble.testimonial::after,
  .about-team .speech-bubble.testimonial::before { display: none; }
}

/* Newsletter Section */
.newsletter {
    padding: 80px 0;
    background: var(--primary-white);
}

.newsletter-panel {
    position: relative;
    background: var(--primary-white);
    border: 3px solid var(--primary-black);
    border-radius: 18px;
    padding: 48px 40px;
    box-shadow: 10px 10px 0 rgba(0,0,0,0.2);
    max-width: 900px;
    margin: 0 auto;
    overflow: hidden;
    text-align: center;
}

.newsletter-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 20% 20%, rgba(0,0,0,0.06) 0, rgba(0,0,0,0.06) 2px, transparent 3px) 0 0/12px 12px;
    opacity: 0.6;
    pointer-events: none;
}

.newsletter-content h3 {
    display: inline-block;
    font-size: 36px;
    font-weight: 900;
    margin-bottom: 15px;
    background: var(--primary-white);
    border: 3px solid var(--primary-black);
    border-radius: 16px;
    padding: 10px 20px;
    position: relative;
    z-index: 1;
}

.newsletter-content p {
    font-size: 18px;
    margin-bottom: 30px;
    opacity: 0.9;
    color: #333;
}

.newsletter-form {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 12px;
    max-width: 520px;
    margin: 20px auto 0;
}

.newsletter-input {
    flex: 1;
    padding: 14px 16px;
    border: 3px solid var(--primary-black);
    background: #fff;
    color: var(--primary-black);
    font-weight: 700;
    border-radius: 12px;
}

.newsletter-input:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--accent-red);
}

.newsletter-form .btn.btn-primary {
    border: 3px solid var(--primary-black);
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 14px 20px;
    font-weight: 900;
    border-radius: 12px;
}

@media (max-width: 600px) {
    .newsletter { padding: 60px 0; }
    .newsletter-panel { padding: 36px 22px; }
    .newsletter-content h3 { font-size: 28px; }
    .newsletter-content p { font-size: 16px; }
}

/* Footer */
.footer {
    background: var(--primary-black);
    color: var(--primary-white);
    padding: 50px 0 20px;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 40px;
    margin-bottom: 30px;
}

.footer-section h4 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 20px;
    color: var(--primary-white);
}

.footer-section ul {
    list-style: none;
}

.footer-section ul li {
    margin-bottom: 10px;
}

.footer-section a {
    color: var(--gray-400);
    text-decoration: none;
    transition: var(--transition-fast);
}

.footer-section a:hover {
    color: var(--primary-white);
}

.social-links {
    display: flex;
    gap: 15px;
}

.social-link {
    display: inline-block;
    font-size: 24px;
    color: var(--gray-400);
    transition: var(--transition-fast);
}

.social-link:hover {
    color: var(--primary-white);
    transform: scale(1.2);
}

.footer-bottom {
    border-top: 1px solid var(--gray-500);
    padding-top: 20px;
    text-align: center;
    color: var(--gray-400);
}

/* Cart Sidebar */
.cart-sidebar {
    position: fixed;
    top: 0;
    right: -400px;
    width: 400px;
    height: 100%;
    background: var(--primary-white);
    border-left: var(--manga-border);
    z-index: 1001;
    transition: right var(--transition-smooth);
    display: flex;
    flex-direction: column;
    box-shadow: -10px 0 0 0 var(--primary-black);
}

.cart-sidebar.open {
    right: 0;
}

.cart-header {
    padding: 20px 20px 28px;
    border-bottom: 2px dashed var(--primary-black);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

.cart-header h3 {
    font-size: 20px;
    font-weight: 700;
}
.cart-header::after{
    content:'';
    position:absolute; left:20px; bottom:-10px; width:90px; height:18px;
    transform: rotate(-6deg);
    background: linear-gradient(transparent, transparent) padding-box, repeating-linear-gradient(45deg, rgba(0,0,0,.12) 0 6px, rgba(0,0,0,0) 6px 12px) border-box, #fffbcc;
    border: 2px solid var(--primary-black);
    border-radius: 6px; box-shadow: 4px 4px 0 0 var(--primary-black);
}

.cart-close {
    background: none;
    border: 2px solid var(--primary-black);
    width: 30px;
    height: 30px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.cart-items {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background-image: radial-gradient(circle at 20% 30%, rgba(0,0,0,0.03) 1px, transparent 1px), radial-gradient(circle at 80% 70%, rgba(0,0,0,0.03) 1px, transparent 1px);
    background-size: 22px 22px;
}
.empty-cart{ display:grid; place-items:center; min-height: 48vh; }
.empty-cart .icon{ font-size:54px; filter: contrast(1.1) saturate(.95); }
.empty-cart .icon.anime{ width: 120px; height: 120px; border: 3px solid var(--primary-black); border-radius: 12px; background:#fff; box-shadow:6px 6px 0 0 var(--primary-black); display:grid; place-items:center; overflow:hidden; margin-bottom:12px; }
.empty-cart .icon.anime img{ width:100%; height:100%; object-fit: cover; display:block; }
.empty-cart h3{ font-size:20px; font-weight:900; margin:10px 0 6px; }
.empty-cart p{ color:#777; text-align:center; }

.cart-item {
    display: grid; grid-template-columns: 60px 1fr auto; align-items: start;
    gap: 12px;
    padding: 12px;
    border: 3px solid var(--primary-black);
    margin-bottom: 15px;
    border-radius: 12px;
    background: var(--primary-white);
    box-shadow: 6px 6px 0 0 var(--primary-black);
}

.cart-item-image {
    width: 60px;
    height: 60px;
    background: var(--gray-100);
    border: 3px solid var(--primary-black);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    border-radius: 8px;
}
.cart-item-image img{ width:100%; height:100%; object-fit:cover; display:block; border-radius:4px; }

.cart-item-info {
    display:grid; gap:6px;
}

.cart-item-name {
    font-weight: 600;
    margin-bottom: 5px;
}

.cart-item-price {
    color: var(--accent-red);
    font-weight: 700;
}
.cart-item-total-note{ font-size:12px; color:#666; font-weight:700; }
.cart-item .cart-item-actions{ display:flex; align-items:center; gap:8px; }
.qty-btn{width:28px;height:28px;border:3px solid var(--primary-black);background:#fff;border-radius:8px;cursor:pointer;font-weight:900;line-height:1}
.qty-btn:hover{background:var(--primary-black);color:#fff}

.cart-footer {
    padding: 20px;
    border-top: 2px dashed var(--primary-black);
    background: var(--primary-white);
    position: sticky;
    bottom: 0;
}

.cart-total {
    padding: 14px 20px 20px;
    font-weight: 900;
    margin-bottom: 15px;
    text-align: center;
}

.cart-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
.cart-footer .btn{ width:100%; }
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-smooth);
}

.cart-overlay.open {
    opacity: 1;
    visibility: visible;
}

/* Subtle item pop on open */
.cart-sidebar.open .cart-item{ animation: cartPop .25s ease both; }
@keyframes cartPop{ from{ transform: translateY(6px) scale(.98); opacity:.0; } to{ transform: translateY(0) scale(1); opacity:1; } }

/* Compare Drawer */
.compare-drawer{position:fixed;bottom:-60%;left:0;right:0;background:var(--primary-white);border-top:3px solid var(--primary-black);box-shadow:0 -10px 0 0 var(--primary-black);z-index:1001;transition:bottom .3s ease;max-height:60%;overflow:auto}
.compare-drawer.open{bottom:0}
.compare-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:2px dashed var(--primary-black)}
.compare-close{border:3px solid var(--primary-black);background:#fff;width:36px;height:36px;border-radius:8px;cursor:pointer}
.compare-content{padding:16px}
.compare-table{width:100%;border-collapse:separate;border-spacing:0}
.compare-table th,.compare-table td{border:3px solid var(--primary-black);padding:8px 10px;background:#fff}
.compare-fab{position:fixed;right:20px;bottom:100px;border:3px solid var(--primary-black);background:#fff;border-radius:999px;padding:10px 14px;font-weight:900;box-shadow:6px 6px 0 0 var(--primary-black);z-index:1002}
.compare-fab #compare-count{background:var(--accent-red);color:#fff;border:2px solid var(--primary-black);border-radius:999px;padding:0 6px;margin-left:6px}

/* Product size/qty shared styles (kept) */
.modal-options{ display: grid; gap: 14px; margin: 8px 0 12px; }
.option-group{ display: grid; gap: 8px; }
.option-label{ font-weight: 800; font-size: 13px; letter-spacing:.02em; }
.size-grid{ display: flex; flex-wrap: wrap; gap: 8px; }
.size-pill{ min-width: 38px; height: 34px; padding: 0 10px; display: inline-flex; align-items:center; justify-content:center; border: var(--manga-border); background: var(--primary-white); cursor: pointer; user-select: none; }
.size-pill.active{ background: var(--primary-black); color: var(--primary-white); }
.qty-row{ display:flex; align-items:center; gap: 8px; }
.qty-input{ width: 64px; height: 34px; border: var(--manga-border); text-align:center; font-weight: 800; }

/* Contact extras */
.copy-email-btn { margin-left: 8px; border: 2px solid #000; background: #fff; border-radius: 8px; padding: 4px 8px; cursor: pointer; }
.copy-email-btn:hover { transform: translateY(-1px); }
.map-card { margin-top: 14px; border: 3px solid #000; border-radius: 14px; overflow: hidden; box-shadow: 6px 6px 0 rgba(0,0,0,0.15); }
.map-card .map-head { padding: 8px 12px; font-weight: 900; border-bottom: 2px dashed #000; background: #fff; }
.map-card .map-body { background: #f8f8f8; }

/* removed modal responsive rules */

/* Full-screen image viewer */
.image-fullscreen{ position: fixed; inset: 0; z-index: 3000; display: grid; place-items: center; opacity: 0; transition: opacity .15s ease; }
.image-fullscreen.open{ opacity: 1; }
.image-fullscreen .fs-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.9); }
.image-fullscreen img{ position: relative; z-index:1; max-width: 96vw; max-height: 96vh; object-fit: contain; border: 3px solid #000; box-shadow: 12px 12px 0 0 #000; background:#fff; }

/* Dark Mode Styles */
.theme-toggle {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    border: var(--manga-border);
    background: var(--primary-white);
    border-radius: 50%;
    cursor: pointer;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: var(--transition-smooth);
    box-shadow: var(--shadow-medium);
}

.theme-toggle:hover { transform: scale(1.05); }

.theme-icon {
    position: relative;
    width: 22px;
    height: 22px;
    display: inline-block;
    transition: transform var(--transition-smooth);
}

/* Dark Mode Variables */
body.dark-mode {
    --primary-black: #ffffff;
    --primary-white: #1a1a1a;
    --accent-red: #ff4444;
    --gray-100: #2a2a2a;
    --gray-200: #3a3a3a;
    --gray-300: #4a4a4a;
    --gray-400: #6a6a6a;
    --gray-500: #8a8a8a;
    --gray-900: #f0f0f0;
}

/* CSS crescent moon icon */
.theme-icon::before,
.theme-icon::after { content: ""; position: absolute; border-radius: 50%; inset: 0; }
.theme-icon::before { background: var(--primary-black); }
/* cut-out circle to form crescent */
.theme-icon::after { background: var(--primary-white); transform: translate(6px, -2px) scale(0.88); }

/* In dark mode, flip colors so moon remains visible and crisp */
body.dark-mode .theme-icon::before { background: var(--primary-black); }
body.dark-mode .theme-icon::after { background: var(--primary-white); }

/* Custom Cursor */
:root{
    --cursor-color: var(--primary-black);
    --cursor-ring-color: var(--primary-black);
    --cursor-interact-bg: rgba(0,0,0,0.06);
}
body.dark-mode{
    --cursor-color: var(--primary-black); /* flips to white in dark mode theme vars */
    --cursor-ring-color: var(--primary-black);
    --cursor-interact-bg: rgba(255,255,255,0.08);
}
body.cursor-custom{ cursor: none; }
.cursor-custom, .cursor-custom *{ cursor: none !important; }
.cursor-dot{ position: fixed; left: 0; top: 0; width: 6px; height: 6px; border-radius: 50%; background: var(--cursor-color); transform: translate(-50%, -50%); pointer-events: none; z-index: 4001; opacity: 0; transition: opacity .15s ease; }
.cursor-ring{ position: fixed; left: 0; top: 0; width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--cursor-ring-color); transform: translate(-50%, -50%) scale(1); pointer-events: none; z-index: 4000; opacity: 0; transition: opacity .15s ease, transform .12s ease, border-color .2s ease, background-color .2s ease; }
/* Visibility */
.cursor-visible .cursor-dot, .cursor-visible .cursor-ring{ opacity: 1; }
.cursor-hidden .cursor-dot, .cursor-hidden .cursor-ring{ opacity: 0; }
/* States */
.cursor-active .cursor-ring{ transform: translate(-50%, -50%) scale(0.86); }
.cursor-interactive .cursor-ring{ transform: translate(-50%, -50%) scale(1.25); background-color: var(--cursor-interact-bg); }

/* Cursor trail dots */
.cursor-trail{ position: fixed; left:0; top:0; width: 8px; height: 8px; border-radius: 50%; background: var(--cursor-ring-color); transform: translate(-50%, -50%) scale(1); pointer-events: none; z-index: 3999; opacity: 0; transition: opacity .15s ease; mix-blend-mode: multiply; }
.cursor-visible .cursor-trail{ opacity: .35; }

/* Optimize transforms on magnetic targets */
a, button, .btn, [role="button"]{ will-change: transform; }

body.dark-mode .loading-screen {
    background: var(--primary-white);
}

body.dark-mode .hero::before {
    background-image: 
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.03) 1px, transparent 1px),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.03) 1px, transparent 1px);
}

body.dark-mode .testimonials::before {
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.02) 1px, transparent 1px),
        radial-gradient(circle at 80% 90%, rgba(255,255,255,0.02) 1px, transparent 1px);
}

/* Responsive Design */
@media (max-width: 768px) {
    .nav-menu {
        display: none;
    }
    
    .menu-toggle {
        display: flex;
    }

    /* Reset desktop spacing adjustments on small screens */
    .nav-menu ul { gap: 20px; }
    .search-wrap { max-width: 100%; min-width: 0; flex: 1 1 auto; }
}

@media (max-width: 1100px) {
    .nav-menu ul { gap: 20px; }
    .search-wrap { flex-basis: 260px; max-width: 260px; }
}

@media (max-width: 1300px) {
    .nav-menu ul { gap: 22px; }
    .search-wrap { flex-basis: 280px; max-width: 280px; }
}

/* Additional stacking/layout tweaks for tablets/phones */
@media (max-width: 768px) {
    .hero-content {
        grid-template-columns: 1fr;
        gap: 40px;
        text-align: center;
    }
    
    .hero-title {
        font-size: 36px;
    }
    
    .hero-actions {
        justify-content: center;
    }
    
    .product-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }
    
    .newsletter-form {
        flex-direction: column;
    }
    
    .cart-sidebar {
        width: 100%;
        right: -100%;
    }
    
    .filter-tabs {
        gap: 10px;
    }
    
    .filter-tab {
        padding: 8px 16px;
        font-size: 14px;
    }
    
    .testimonials-grid {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .testimonial-card {
        flex-direction: column;
        text-align: center;
    }
    
    .speech-bubble.testimonial::after,
    .speech-bubble.testimonial::before {
        display: none;
    }
    
    .modal-body {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .theme-toggle {
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
    }
    
    .sound-effect {
        font-size: 18px;
    }

    /* Timeline mobile */
    .timeline::before { left: 20px; margin-left: 0; background-size: 10px 50px; animation: none; }
    .timeline-badge { left: 20px; transform: translate(-50%, -50%); }
    .timeline-card { width: auto; margin: 0 0 0 56px !important; }
    .timeline-item .timeline-card::after { display: none; }
    .timeline-item .timeline-card::before { animation: none; }
}

@media (max-width: 480px) {
    .container {
        padding: 0 15px;
    }
    
    .hero {
        padding: 100px 0 60px;
    }
    
    .hero-title {
        font-size: 28px;
    }
    
    .manga-text-bubble {
        padding: 25px;
    }
    
    .hero-actions {
        flex-direction: column;
        gap: 15px;
    }
    
    .btn {
        padding: 12px 24px;
        font-size: 14px;
    }
    
    .product-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .section-title {
        font-size: 32px;
    }
}

/* People section (below Lookbook) */
.people-section{max-width:1280px;margin:36px auto 0 auto;text-align:center}
.people-heading{display:inline-flex;align-items:center;gap:10px;margin-bottom:16px;font-weight:900}
.people-heading .people-en{font-size:30px;letter-spacing:.02em}
.people-heading .people-jp{font-size:22px;letter-spacing:.08em;opacity:.85;padding:2px 10px;border:3px solid #000;border-radius:12px;background:#fff;transform: skew(-5deg)}
.people-heading::after{content:'';display:block;height:4px;width:120px;background:#ff0000;margin-left:14px;transform:skew(-5deg)}
.people-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;justify-items:center}
.person-card{width:100%;max-width:380px;display:grid;grid-template-rows:220px auto;background:#fff;border:3px solid #000;border-radius:14px;overflow:hidden;box-shadow:8px 8px 0 0 #000;cursor:pointer;transition:transform .15s ease, box-shadow .15s ease}
.person-card:hover{transform:translateY(-3px);box-shadow:10px 10px 0 0 #000}
.person-card:focus{outline:3px solid #000; outline-offset: 2px}
.person-thumb{background:#eee;background-size:cover;background-position:center;border-bottom:2px dashed #000}
.person-meta{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-top:2px dashed #000}
.person-name{font-weight:900;color:#000;text-decoration:none}
.person-name:hover{text-decoration:underline}
.person-tag{font-size:12px;opacity:.7}

/* Utility Classes */
.hidden {
    display: none !important;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Animation Classes */
.fade-in {
    animation: fadeIn 0.6s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-up {
    animation: slideUp 0.6s ease-out;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(-50px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes shine {
    0% {
        transform: rotate(45deg) translateX(-200%);
    }
    100% {
        transform: rotate(45deg) translateX(200%);
    }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-10px);
    }
    60% {
        transform: translateY(-5px);
    }
}

/* Loading Animation Hide */
.loading-screen.hidden {
    opacity: 0;
    pointer-events: none;
}
.loading-screen.auto{animation: loaderAutoHide 3.2s forwards}
@keyframes loaderAutoHide{0%{opacity:1}85%{opacity:1}100%{opacity:0;visibility:hidden}}

/* Section Transition Overlay */
.section-transition{position:fixed;inset:0;z-index:3000;display:none;align-items:center;justify-content:center;background:transparent}
.section-transition.show{display:flex}
.section-transition .st-panel{position:relative;width:100%;height:100%;overflow:hidden;background:transparent}
.section-transition .st-wipe{position:absolute;inset:0;background:var(--primary-black);transform:translateX(-102%)}
.section-transition .st-word{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-weight:900;font-size:48px;border:3px solid var(--primary-white);background:var(--primary-black);color:var(--primary-white);padding:6px 16px;border-radius:12px;box-shadow:6px 6px 0 var(--primary-white);opacity:0}
@keyframes stWipe{0%{transform:translateX(-102%)}50%{transform:translateX(0)}100%{transform:translateX(102%)} }
@keyframes stWord{0%{opacity:0;transform:translate(-50%,-55%)}40%{opacity:1}100%{opacity:0;transform:translate(-50%,-45%)} }
.section-transition.show .st-wipe{animation: stWipe .7s cubic-bezier(.2,.8,.2,1) forwards}
.section-transition.show .st-word{animation: stWord .7s ease forwards .05s}
body.dark-mode .section-transition .st-wipe{background:var(--primary-white)}
body.dark-mode .section-transition .st-word{background:var(--primary-white);color:var(--primary-black);border-color:var(--primary-black);box-shadow:6px 6px 0 var(--primary-black)}

/* ==========================
     Enhanced Manga Loader
     (panel, halftone, speed lines, sfx)
     ========================== */
.loading-screen .loader-stage{position:relative;width:min(700px,92vw);height:min(380px,56vh)}
.loading-screen .loader-panel{position:relative;width:100%;height:100%;background:#fff;box-shadow:0 0 0 6px #000 inset,8px 8px 0 0 #000;overflow:hidden;border-radius:12px}
.loading-screen .loader-frame{position:absolute;inset:12px;border:3px solid #000;border-radius:8px;pointer-events:none}
.loading-screen .loader-halftone{position:absolute;inset:0;background:
    radial-gradient(circle at 20% 30%,rgba(0,0,0,.06) 0 2px,transparent 3px) 0 0/18px 18px,
    radial-gradient(circle at 80% 70%,rgba(0,0,0,.05) 0 2px,transparent 3px) 0 0/22px 22px;
    opacity:.7;mix-blend-mode:multiply}
.loading-screen .loader-speedlines{position:absolute;inset:-40% -10%;background:
    repeating-linear-gradient(105deg,transparent 0 20px,rgba(0,0,0,.07) 20px 28px);
    animation:ldr-speed 2.1s linear infinite}
@keyframes ldr-speed{to{transform:translateX(-120px)}}
.loading-screen .loader-center{position:absolute;inset:0;display:grid;place-items:center;gap:14px;padding:28px}
.loading-screen .loader-brand{position:relative;height:68px;display:grid;place-items:center;margin-top:-6px}
.loading-screen .loader-wordmark{position:relative; font-weight:900; font-size:48px; letter-spacing:.5px; color:#000; padding:4px 14px; border:3px solid #000; background:#fff; border-radius:10px; box-shadow:6px 6px 0 #000; z-index:1}
.loading-screen .ink-wipe{position:absolute; inset:-4px; background:#000; transform:translateX(-102%);}
.loading-screen .loader-panel{overflow:hidden}
@keyframes inkWipe{0%{transform:translateX(-102%)}50%{transform:translateX(0)}100%{transform:translateX(102%)}}
.loading-screen .ink-wipe{animation: inkWipe 0.9s ease-out 0.1s forwards}
body.dark-mode .loading-screen .ink-wipe{background:#fff}
.loading-screen .loader-bubble{position:relative;background:#fff;padding:14px 22px;border:3px solid #000;border-radius:14px;box-shadow:6px 6px 0 #000;font-weight:900;letter-spacing:.3px}
.loading-screen .loader-caret{position:absolute;left:50%;transform:translateX(-50%);bottom:-12px;font-weight:900}
.loading-screen .loader-bar{width:66%;height:14px;border:3px solid #000;background:#fff;border-radius:10px;box-shadow:4px 4px 0 #000;overflow:hidden;margin-top:6px}
.loading-screen .loader-bar-fill{height:100%;width:0;background:linear-gradient(90deg,#000 0,#333 100%);animation:ldr-fill 2.6s ease-in-out infinite}
@keyframes ldr-fill{0%{width:0}50%{width:90%}100%{width:100%}}
.loading-screen .sfx{position:absolute;font-weight:900;color:#000;letter-spacing:.5px;border:3px solid #000;background:#fff;padding:2px 8px;box-shadow:4px 4px 0 #000}
.loading-screen .sfx-1{top:22px;left:22px;transform:rotate(-8deg)}
.loading-screen .sfx-2{bottom:26px;right:28px;transform:rotate(6deg)}
.loading-screen .sfx-3{top:50%;right:14px;transform:rotate(-3deg)}
.loading-screen .loader-skip{position:absolute;right:0;bottom:-48px;background:#fff;border:3px solid #000;border-radius:999px;padding:8px 14px;font-weight:700;box-shadow:4px 4px 0 #000;cursor:pointer}
.loading-screen .loader-skip:active{transform:translateY(1px)}

/* Dark mode variant for loader */
body.dark-mode .loading-screen .loader-panel{background:#111;box-shadow:0 0 0 6px #fff inset,8px 8px 0 0 #fff}
/* Blog / Stories */
.blog-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:22px;align-items:stretch}
.blog-card{position:relative;display:block;background:#fff;color:#111;text-decoration:none;border:2px solid #111;box-shadow:6px 6px 0 #111;overflow:hidden;transition:transform .15s ease, box-shadow .15s ease}
.blog-card:hover{transform:translateY(-4px);box-shadow:10px 10px 0 #111}
.blog-card .panel-border{position:absolute;inset:0;border:3px solid #000;pointer-events:none}
.blog-card-cover{width:100%;height:200px;background:#eee;background-size:cover;background-position:center}
.blog-card-meta{padding:12px 14px}
.blog-card-title{font-weight:900;font-size:18px;line-height:1.3}
.blog-card-date{font-size:12px;color:#666;margin-top:6px}
.blog-card-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.tag-pill{font-size:11px; font-weight:800; border:2px solid #000; padding:2px 8px; border-radius:999px; background:#fff}
.blog-article{max-width:800px;margin:0 auto;border:2px solid #111;box-shadow:6px 6px 0 #111;background:#fff;color:#111;padding:20px}
.blog-article.hidden{display:none}
.blog-article h1,.blog-article h2,.blog-article h3{font-weight:900;margin:18px 0 8px}
.blog-article p{margin:10px 0;line-height:1.6}
.blog-article ul{margin:10px 0 10px 18px}
.blog-article code{background:#f5f5f5;border:1px solid #ddd;padding:0 4px;border-radius:3px}
.blog-article .back-link{display:inline-block;margin-bottom:10px}

/* Lookbook */
.lookbook-filter{display:flex;gap:10px;margin-bottom:18px;flex-wrap:wrap}
.lookbook-filter .btn{border:2px solid #000;background:#fff;font-weight:800}
.lookbook-filter .btn.active{background:#000;color:#fff}
.lookbook-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px;align-items:stretch}
.look-card{position:relative;border:2px solid #111;box-shadow:6px 6px 0 #111;background:#fff;overflow:hidden;transition:transform .15s ease, box-shadow .15s ease}
.look-card{cursor:pointer;text-align:left}
.look-card:focus-visible{outline:3px solid #000;outline-offset:3px}
.look-card:hover{transform:translateY(-4px);box-shadow:10px 10px 0 #111}
.look-card .panel-border{position:absolute;inset:0;border:3px solid #000;pointer-events:none}
.look-img{height:300px;background:#eee;background-size:cover;background-position:center}
.look-meta{display:flex;align-items:center;justify-content:space-between;padding:10px 12px}
.look-title{font-weight:900}

/* Lookbook lightbox */
.lookbox{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:2000}
.lookbox.open{display:flex}
.modal-open{overflow:hidden}
.lookbox-panel{position:relative;background:#fff;color:#000;border:3px solid #000;border-radius:12px;box-shadow:10px 10px 0 #000;width:min(1100px,96vw);max-height:90vh;display:flex;flex-direction:column;overflow:hidden}
.lookbox-img{flex:1 1 auto;background:#eee;background-size:contain;background-repeat:no-repeat;background-position:center;aspect-ratio:16/10;min-height:320px;max-height:calc(90vh - 70px);width:100%}
.lookbox-img::after{content:attr(data-fallback);display:none}
.lookbox-meta{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-top:2px dashed #000}
.lookbox-title{font-weight:900}
.lookbox-close,.lookbox-prev,.lookbox-next{position:absolute;border:3px solid #000;background:#fff;width:44px;height:44px;border-radius:10px;display:grid;place-items:center;cursor:pointer;box-shadow:4px 4px 0 #000}
.lookbox-close{top:12px;right:12px}
.lookbox-prev{top:50%;left:12px;transform:translateY(-50%)}
.lookbox-next{top:50%;right:12px;transform:translateY(-50%)}

@media (max-width: 900px){
    .look-img{height:240px}
    .lookbox-img{min-height:300px}
}
.look-tag{font-size:12px;color:#666}

/* Community UGC */
.ugc-form{border:2px solid #111;padding:18px;background:#fff;box-shadow:6px 6px 0 #111}
.ugc-form .form-row{display:flex;gap:12px;flex-wrap:wrap}
.ugc-form .form-field{flex:1;min-width:220px}
.ugc-form .form-field.full{flex:1 0 100%}
.ugc-form label{font-weight:800;display:block;margin-bottom:6px}
.ugc-form input[type="text"],.ugc-form input[type="email"],.ugc-form input[type="file"]{width:100%;padding:10px;border:2px solid #111}
.ugc-form .checkbox{display:flex;align-items:center;gap:8px;margin-top:8px}
.ugc-result{margin-top:12px;font-weight:800}
.ugc-result.ok{color:#0a5}
.ugc-result.err{color:#b00}
/* Selected image preview */
.ugc-preview[hidden]{display:none !important}
.ugc-preview{display:flex;align-items:center;gap:12px;margin-top:10px;padding:10px;border:1px dashed var(--paper-border, #ccc);border-radius:10px;background:var(--paper-bg, #fff)}
.ugc-preview .thumb{width:84px;height:84px;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.ugc-preview .thumb:not([src]),
.ugc-preview .thumb[src=""]{display:none}
.ugc-preview .meta{display:flex;flex-direction:column;gap:2px;min-width:0}
.ugc-preview .meta #ugc-preview-name{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:38vw}
.ugc-preview .meta #ugc-preview-size{color:#666}
.ugc-preview .clear-btn{margin-left:auto;border:2px solid var(--primary-black);background:transparent;color:var(--primary-black);padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:800}
.ugc-preview .clear-btn:hover{transform:translateY(-1px)}
body.dark-mode .ugc-preview{background:#111;border-color:#333}
body.dark-mode .ugc-preview .meta #ugc-preview-size{color:#aaa}
body.dark-mode .ugc-preview .clear-btn{border-color:#fff;color:#fff}
body.dark-mode .loading-screen .loader-frame{border-color:#fff}
body.dark-mode .loading-screen .loader-bubble{background:#0e0e0e;color:#fff;border-color:#fff;box-shadow:6px 6px 0 #fff}
body.dark-mode .loading-screen .loader-bar{border-color:#fff;background:#0e0e0e;box-shadow:4px 4px 0 #fff}
body.dark-mode .loading-screen .loader-bar-fill{background:linear-gradient(90deg,#fff 0,#bbb 100%)}
body.dark-mode .loading-screen .sfx{background:#0e0e0e;color:#fff;border-color:#fff;box-shadow:4px 4px 0 #fff}

/* ==========================
    Premium Title-Card Loader
    ========================== */
.loader-stage.premium{position:relative;width:min(880px,92vw);height:min(440px,60vh);}
.title-card{position:relative;height:180px;margin:36px 24px 14px;border:6px solid #000;border-radius:14px;background:#fff;box-shadow:10px 10px 0 #000;overflow:hidden}
.title-card .tc-frame{position:absolute;inset:12px;border:3px solid #000;border-radius:8px}
.title-card .tc-ink-swipe{position:absolute;inset:0;background:#000;transform:translateX(-102%);animation:tcWipe 1.1s cubic-bezier(.2,.8,.2,1) .1s forwards}
.title-card .tc-wordmark{position:absolute;top:36px;left:36px;font-weight:900;font-size:56px;line-height:1;background:#fff;border:3px solid #000;border-radius:12px;padding:6px 16px;box-shadow:6px 6px 0 #000;z-index:1}
.title-card .tc-tagline{position:absolute;bottom:24px;left:36px;font-weight:700;font-size:16px;background:#fff;border:3px solid #000;border-radius:999px;padding:6px 12px;box-shadow:4px 4px 0 #000;z-index:1}
@keyframes tcWipe{0%{transform:translateX(-102%)}50%{transform:translateX(0)}100%{transform:translateX(102%)}}
.title-card.shake{animation: tcShake .28s ease-in-out 1 .95s}
@keyframes tcShake{0%{transform:translateX(0)}25%{transform:translateX(-2px)}50%{transform:translateX(2px)}75%{transform:translateX(-1px)}100%{transform:translateX(0)}}

.tc-scanlines{position:absolute;inset:10px 18px 96px;background:repeating-linear-gradient(120deg,transparent 0 22px,rgba(0,0,0,.06) 22px 30px);mix-blend-mode:multiply;pointer-events:none}

.tc-progress{position:absolute;left:24px;right:24px;bottom:22px;display:grid;gap:10px}
.tc-progress-track{height:18px;border:3px solid #000;border-radius:12px;background:#fff;box-shadow:4px 4px 0 #000;overflow:hidden}
.tc-progress-fill{height:100%;width:0;background:linear-gradient(90deg,#000 0,#333 100%);}
.tc-progress-meta{display:flex;align-items:center;gap:14px;font-weight:900}
.tc-percent{display:inline-block;min-width:44px;text-align:right}
.tc-status{opacity:.85}

.tc-sfx{position:absolute;inset:0;pointer-events:none}
.tc-sfx-chip{position:absolute;background:#fff;border:3px solid #000;box-shadow:4px 4px 0 #000;font-weight:900;padding:4px 10px}
.tc-sfx .chip-1{top:12px;left:20px;transform:rotate(-6deg)}
.tc-sfx .chip-2{right:26px;top:40%;transform:rotate(4deg)}
.tc-sfx .chip-3{right:32px;bottom:32px;transform:rotate(-4deg)}

/* Dark mode */
body.dark-mode .title-card{background:#111;box-shadow:10px 10px 0 #fff;border-color:#fff}
body.dark-mode .title-card .tc-frame{border-color:#fff}
body.dark-mode .title-card .tc-wordmark, body.dark-mode .title-card .tc-tagline{background:#0e0e0e;color:#fff;border-color:#fff;box-shadow:6px 6px 0 #fff}
body.dark-mode .tc-scanlines{background:repeating-linear-gradient(120deg,transparent 0 22px,rgba(255,255,255,.1) 22px 30px)}
body.dark-mode .tc-progress-track{background:#0e0e0e;border-color:#fff;box-shadow:4px 4px 0 #fff}
body.dark-mode .tc-progress-fill{background:linear-gradient(90deg,#fff 0,#bbb 100%)}
body.dark-mode .tc-sfx-chip{background:#0e0e0e;color:#fff;border-color:#fff;box-shadow:4px 4px 0 #fff}

/* Handoff animation: slide title-card upward and fade as loader hides */
.loading-screen.lift .title-card{transition: transform .45s ease, opacity .45s ease; transform: translateY(-48px); opacity:.92}
.loading-screen.hidden .title-card{transform: translateY(-64px); opacity:0}

/* Scroll Behavior */
html {
    scroll-behavior: smooth;
}

/* About Page: Timeline */
.timeline { position: relative; margin: 20px 0; }
.timeline::before {
    content: '';
    position: absolute; top: 0; bottom: 0; left: 50%;
    width: 14px; margin-left: -7px; /* center by half width */
    color: var(--primary-black);
    background: center / 12px 60px repeat-y url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='60' viewBox='0 0 12 60'><path d='M6 0 C 8 10 4 20 6 30 C 8 40 4 50 6 60' stroke='currentColor' stroke-width='3' fill='none' stroke-linecap='round'/></svg>");
    animation: spineWobble 7s ease-in-out infinite alternate;
}
.timeline-item { position: relative; min-height: 120px; margin: 40px 0; }
.timeline-badge {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    z-index: 2;
    background: var(--primary-white);
    border: var(--manga-border);
    padding: 8px 14px;
    font-weight: 900;
    white-space: nowrap;
}
.timeline-badge::after {
    content: '';
    position: absolute; top: -6px; right: -6px; width: 14px; height: 14px;
    background: var(--accent-red); transform: rotate(45deg);
}
.timeline-card {
    position: relative; background: var(--primary-white); border: var(--manga-border);
    padding: 18px 20px; width: 42%;
}
.timeline-item:nth-child(odd) .timeline-card::before {
    content: '';
    position: absolute; inset: 6px; z-index: 0; pointer-events: none;
    background-image: repeating-linear-gradient(45deg, rgba(0,0,0,0.06) 0 2px, transparent 2px 12px);
    animation: panelDrift 10s linear infinite;
}
.timeline-item:nth-child(even) .timeline-card::before {
    content: '';
    position: absolute; inset: 6px; z-index: 0; pointer-events: none;
    background-image: 
      radial-gradient(circle at 15% 20%, rgba(0,0,0,0.05) 2px, transparent 2px),
      radial-gradient(circle at 75% 70%, rgba(0,0,0,0.05) 2px, transparent 2px);
    background-size: 22px 22px;
    animation: halftoneFloat 12s ease-in-out infinite;
}
.timeline-item:nth-child(odd) .timeline-card { margin-right: 58%; }
.timeline-item:nth-child(even) .timeline-card { margin-left: 58%; }

/* Connectors from card to spine */
.timeline-item:nth-child(odd) .timeline-card::after {
    content: '';
    position: absolute; top: 50%; right: -30px; transform: translateY(-50%);
    width: 30px; height: 3px; background: var(--primary-black);
}
.timeline-item:nth-child(even) .timeline-card::after {
    content: '';
    position: absolute; top: 50%; left: -30px; transform: translateY(-50%);
    width: 30px; height: 3px; background: var(--primary-black);
}

/* Keyframes for subtle motion */
@keyframes panelDrift {
    0% { background-position: 0 0; }
    100% { background-position: 80px 0; }
}
@keyframes halftoneFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
}
@keyframes spineWobble {
    0% { transform: translateX(0); }
    100% { transform: translateX(1.5px); }
}

/* About Page: FAQ */
.faq { display: grid; gap: 12px; }
.faq-item { border: var(--manga-border); background: var(--primary-white); padding: 0; overflow: hidden; }
.faq-item summary {
    list-style: none; /* hide default marker */
    cursor: pointer; font-weight: 700; position: relative; padding: 14px 44px 14px 16px;
}
.faq-item summary::-webkit-details-marker { display: none; }

/* Plus / Minus icon */
.faq-item summary::after {
    content: '+'; position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
    border: var(--manga-border); width: 28px; height: 28px; display: grid; place-items: center;
    background: var(--primary-white); font-weight: 900; line-height: 1;
}
.faq-item[open] summary { color: var(--accent-red); }
.faq-item[open] summary::after { content: '–'; }

/* Manga pointer when open */
.faq-item[open] summary::before {
    content: ''; position: absolute; left: -18px; top: 50%; transform: translateY(-50%);
    width: 0; height: 0; border-right: 18px solid var(--primary-black);
    border-top: 10px solid transparent; border-bottom: 10px solid transparent;
}

.faq-content { margin: 0; padding: 0 16px 14px; color: var(--gray-900); }

/* Smooth content reveal */
.faq-item .faq-content { display: grid; grid-template-rows: 0fr; transition: grid-template-rows 0.25s ease; }
.faq-item[open] .faq-content { grid-template-rows: 1fr; }
.faq-item .faq-content > * { overflow: hidden; }

/* About page refinements */
.about-hero .about-bubble {
    position: relative;
    background: var(--primary-white);
    border-radius: 24px;
    padding: 36px 44px;
    box-shadow: var(--shadow-medium);
    overflow: hidden;
}
.about-hero .about-bubble .hero-subtitle{ position:relative; display:block; transition: transform .28s ease, opacity .28s ease; will-change: transform, opacity; z-index:1; }
.about-hero .about-bubble .hero-subtitle.out-left{ transform: translateX(-14px); opacity: 0; }
.about-hero .about-bubble .hero-subtitle.out-right{ transform: translateX(14px); opacity: 0; }
.about-hero .about-bubble .hero-subtitle.in-right-start{ transform: translateX(14px); opacity: 0; }
.about-hero .about-bubble .hero-subtitle.in-left-start{ transform: translateX(-14px); opacity: 0; }
.about-hero .about-bubble .hero-subtitle.in-end{ transform: translateX(0); opacity: 1; }

/* Ink swipe overlay */
.about-hero .about-bubble .ink-swipe{
        position:absolute; inset:0; pointer-events:none; z-index:2;
        background:
            repeating-linear-gradient(135deg, rgba(255,255,255,0.06) 0 6px, rgba(255,255,255,0) 6px 12px),
            var(--primary-black);
        transform: translateX(-105%);
}
@keyframes swipeRight{ 0%{ transform: translateX(-105%);} 50%{ transform: translateX(0);} 100%{ transform: translateX(105%);} }
@keyframes swipeLeft{ 0%{ transform: translateX(105%);} 50%{ transform: translateX(0);} 100%{ transform: translateX(-105%);} }
.about-hero .about-bubble .ink-swipe.run-right{ animation: swipeRight .38s ease-in-out; }
.about-hero .about-bubble .ink-swipe.run-left{ animation: swipeLeft .38s ease-in-out; }
.about-hero .about-bubble .bubble-copy{
    position:absolute; top:10px; right:10px; width:34px; height:34px;
    border: var(--manga-border); background: var(--primary-white); cursor:pointer;
    display:grid; place-items:center; font-weight:900; font-size:14px;
    transition: transform .15s ease; z-index:3;
}
.about-hero .about-bubble .bubble-copy:hover{ transform: translateY(-2px); background: var(--primary-black); color: var(--primary-white); }

.bubble-controls{ display:flex; gap:10px; justify-content:center; margin-top:14px; }
.bubble-controls button{ width:10px; height:10px; border-radius:50%; border:2px solid var(--primary-black); background: var(--primary-white); cursor:pointer; padding:0; }
.bubble-controls button.active{ background: var(--primary-black); }
.bubble-controls button:focus{ outline: none; box-shadow: 0 0 0 3px var(--accent-red); }
.about-hero .about-bubble::before {
    /* subtle halftone/paper texture */
    content: '';
    position: absolute; inset: 0;
    pointer-events: none;
    background-image:
      radial-gradient(circle at 20% 30%, rgba(0,0,0,0.03) 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, rgba(0,0,0,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
}
.about-hero .about-bubble::after {
    /* centered pointer */
    content: '';
    position: absolute;
    left: 50%; transform: translateX(-50%);
    bottom: -16px;
    width: 0; height: 0;
    border-left: 18px solid transparent;
    border-right: 18px solid transparent;
    border-top: 18px solid var(--primary-black);
}
.about-hero .about-bubble p.hero-subtitle { color: var(--gray-500); font-size: 20px; }

.about-features .feature-panel {
    border: var(--manga-border);
    box-shadow: 6px 6px 0 0 var(--primary-black), 0 0 0 6px var(--primary-white) inset;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.about-features .feature-panel:hover { transform: translateY(-6px) rotate(-0.25deg); box-shadow: 10px 10px 0 0 var(--primary-black), 0 0 0 6px var(--primary-white) inset; }
.about-features .feature-panel::after { top: 12px; right: 12px; }
.about-features .feature-icon {
    width: 84px; height: 84px; line-height: 84px;
    margin: 0 auto 18px; display: grid; place-items: center;
    border: var(--manga-border);
    border-radius: 50%;
    background: var(--primary-white);
    font-size: 42px; filter: grayscale(1) contrast(2);
}

/* Contact Section */
.contact { padding: 80px 0; background: var(--primary-white); }
.contact-grid { display: grid; grid-template-columns: 1.2fr .8fr; gap: 24px; align-items: start; }
.contact-panel { background: #fff; border: 3px solid #000; border-radius: 16px; padding: 20px; box-shadow: 8px 8px 0 rgba(0,0,0,0.15); position: relative; overflow: hidden; }
.contact-panel::after { content: ""; position: absolute; inset: 0; background: radial-gradient(circle at 15% 20%, rgba(0,0,0,.05) 0, rgba(0,0,0,.05) 2px, transparent 3px) 0 0/12px 12px; opacity: .6; pointer-events: none; }
.contact-heading { font-weight: 900; font-size: 20px; margin-bottom: 14px; display: inline-block; background: #fff; border: 3px solid #000; border-radius: 12px; padding: 6px 12px; position: relative; z-index:1; }

/* Form */
#contact-form { position: relative; z-index: 1; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.form-row .full { grid-column: 1 / -1; }
.form-field { display: flex; flex-direction: column; gap: 6px; }
.form-field label { font-weight: 800; }
.form-field input, .form-field select, .form-field textarea { border: 3px solid #000; border-radius: 12px; padding: 12px 14px; background: #fff; font-weight: 700; }
.form-field textarea { resize: vertical; }
.form-field input:focus, .form-field select:focus, .form-field textarea:focus { outline: none; box-shadow: 0 0 0 3px var(--accent-red); }
.form-actions { margin-top: 10px; }

/* Info */
.contact-info-panel .contact-list { list-style: none; display: grid; gap: 12px; padding: 0; position: relative; z-index:1; }
.contact-info-panel .contact-list li { display: grid; grid-template-columns: 36px 1fr; gap: 10px; align-items: start; padding: 10px; border: 2px solid #000; border-radius: 12px; background: #fff; }
.contact-info-panel .contact-ico { width: 36px; height: 36px; display: grid; place-items: center; border: 2px solid #000; border-radius: 50%; background: #fff; font-size: 16px; }
.contact-info-panel .contact-label { font-weight: 900; }
.contact-note { margin-top: 10px; font-size: 12px; color: #444; font-weight: 700; }

@media (max-width: 900px) {
  .contact-grid { grid-template-columns: 1fr; }
}

/* Category Landing Hero */
.category-hero{border:3px solid var(--primary-black);border-radius:14px;box-shadow:8px 8px 0 0 var(--primary-black);background:var(--primary-white);padding:18px 18px 16px;margin:10px 0 18px;display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center}
.category-hero .ch-title{font-size:22px;font-weight:900}
.category-hero .ch-sub{color:var(--gray-500);font-size:14px}
.category-hero .ch-art{width:86px;height:86px;border:3px solid var(--primary-black);border-radius:12px;display:grid;place-items:center;font-size:42px;background:#fff}
.category-hero .ch-art img{max-width:72px;max-height:72px;object-fit:contain;display:block}
.category-hero .ch-tag{display:inline-flex;align-items:center;gap:6px;border:3px solid var(--primary-black);border-radius:999px;padding:4px 10px;font-weight:900;background:#fff}

@media(max-width:720px){
    .category-hero{grid-template-columns:1fr;}
    .category-hero .ch-art{justify-self:start}
}

 

/* Category Tiles */
.category-tiles { padding: 40px 0; }
.tiles-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:16px; }
@media (max-width: 900px){ .tiles-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
.tile { display:block; border:3px solid #000; background:#fff; color:#000; text-decoration:none; position:relative; overflow:hidden; transition: transform .18s ease; min-height:140px; }
.dark-mode .tile { background:#111; color:#fff; border-color:#fff; }
.tile::after { content:""; position:absolute; inset:auto 0 0 0; height:6px; background: repeating-linear-gradient(45deg,#000 0 6px,transparent 6px 12px); opacity:.15; transition:opacity .2s; }
.dark-mode .tile::after { background: repeating-linear-gradient(45deg,#fff 0 6px,transparent 6px 12px); }
.tile:hover { transform: translateY(-4px); }
.tile-emoji { font-size:30px; }
.tile-title { font-weight:900; font-size:18px; }
.tile-sub { font-size:12px; color:#555; }
.dark-mode .tile-sub { color:#aaa; }

/* media tile variant */
.tile.has-media { display:grid; grid-template-columns: 1fr; grid-template-rows: 1fr auto; }
.tile-media { background:#eee center/cover no-repeat; min-height:110px; filter: contrast(1.05) saturate(.95); position:relative; overflow:hidden; }
.tile-media img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;}
.dark-mode .tile-media { background-color:#222; }
.tile-label { padding:14px 16px; display:grid; gap:6px; background: transparent; }

/* Featured Picks */
.featured-picks { padding: 40px 0; }
.featured-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:16px; }
@media (max-width: 900px){ .featured-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
.featured-grid .product-card { height:100%; }

/* Upcoming Collabs */
.upcoming-collabs { padding: 60px 0; background: var(--primary-white); border-top: var(--manga-border); border-bottom: var(--manga-border); }
.upcoming-collabs .section-header { margin-bottom: 24px; }
.upcoming-collabs .collab-ticker{ border:3px solid var(--primary-black); border-radius:12px; background: var(--primary-white); overflow:hidden; box-shadow:6px 6px 0 0 var(--primary-black); margin: 0 0 18px; position: relative; }
.upcoming-collabs .collab-ticker::after{ content:''; position:absolute; inset:auto 0 0 0; height:6px; background: repeating-linear-gradient(45deg, var(--primary-black) 0 6px, transparent 6px 12px); opacity:.12; }
.collab-ticker .track{ display:flex; gap:26px; padding: 8px 12px; white-space: nowrap; will-change: transform; animation: collabTicker 22s linear infinite; }
.collab-ticker .item{ font-weight:900; letter-spacing:.02em; display:inline-flex; align-items:center; gap:10px; }
.collab-ticker .dot{ width:6px; height:6px; border-radius:50%; background: var(--accent-red); display:inline-block; box-shadow: 0 0 0 3px var(--primary-white), 0 0 0 5px var(--primary-black); }
@keyframes collabTicker { from { transform: translateX(0); } to { transform: translateX(-50%); } }
.collab-grid { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 16px; }
@media (max-width: 1100px){ .collab-grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }
@media (max-width: 900px){ .collab-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 560px){ .collab-grid { grid-template-columns: 1fr; } }
.collab-card { position: relative; background: var(--primary-white); border: 3px solid var(--primary-black); border-radius: 14px; overflow: hidden; display:grid; grid-template-rows: 200px auto; box-shadow: 8px 8px 0 0 var(--primary-black); transition: transform .35s ease, box-shadow .18s ease, opacity .35s ease; opacity: 0; transform: translateY(16px) scale(.98) rotate(var(--tilt, 0deg)); }
.collab-card.in-view { opacity: 1; transform: translateY(0) scale(1) rotate(var(--tilt, 0deg)); }
.collab-grid .collab-card:nth-child(4n+1){ --tilt: -1.2deg; }
.collab-grid .collab-card:nth-child(4n+2){ --tilt: 0.6deg; }
.collab-grid .collab-card:nth-child(4n+3){ --tilt: -0.6deg; }
.collab-grid .collab-card:nth-child(4n+4){ --tilt: 1.1deg; }
.collab-card:hover { transform: translateY(-4px) scale(1.01) rotate(var(--tilt, 0deg)); box-shadow: 12px 12px 0 0 var(--primary-black); }
.collab-media { position: relative; background: var(--gray-100); border-bottom: 2px dashed var(--primary-black); display:grid; place-items: center; }
.collab-media::after { content:''; position:absolute; inset:0; background-image: radial-gradient(circle at 25% 25%, rgba(0,0,0,0.04) 2px, transparent 2px), radial-gradient(circle at 75% 75%, rgba(0,0,0,0.04) 2px, transparent 2px); background-size: 24px 24px; }
.collab-media img{ position: relative; z-index:1; max-width: 70%; max-height: 70%; object-fit: contain; filter: contrast(1.05) saturate(.95); image-rendering: auto; }
.collab-media.cover::after{ display:none; }
.collab-media.cover img{ position:absolute; inset:0; width:100%; height:100%; max-width:none; max-height:none; object-fit: cover; object-position: center top; }
.collab-media.contain::after{ display:none; }
.collab-media.contain{ display:block; position:relative; }
.collab-media.contain img{ position:absolute; inset:0; width:100%; height:100%; object-fit: contain; max-width:none; max-height:none; }
/* Full-bleed card while keeping entire banner visible */
.collab-media.contain-fill::after{ display:none; }
.collab-media.contain-fill{ position:relative; }
.collab-media.contain-fill::before{
    content:""; position:absolute; inset:0; z-index:0;
    background: var(--bg, var(--thumb, #000)) center/cover no-repeat;
}
.collab-media.contain-fill img{
    position:absolute; inset:0; z-index:1; width:auto; height:auto; max-width: 100%; max-height: 100%;
    object-fit: contain;
}
/* Variant: fill margins with a solid color (no duplicate image, no blur) */
.collab-media.contain-fill-color::before{ content:""; position:absolute; inset:0; z-index:0; background: var(--fill, #000); }
.collab-media.contain-fill-color img{ position:absolute; inset:0; z-index:1; width:auto; height:auto; max-width:100%; max-height:100%; object-fit: contain; }
.collab-emoji { font-size: 44px; filter: grayscale(1) contrast(1.6); z-index: 1; }
.collab-info { padding: 14px 14px 16px; display:grid; gap:10px; }
/* Improve dark mode readability of info area */
body.dark-mode .collab-info { background: transparent; }
body.dark-mode .collab-card { background: #0e0e0e; border-color: #fff; box-shadow: 10px 10px 0 0 #fff; }
body.dark-mode .collab-media { background: #222; border-bottom-color: #fff; }
.collab-title { font-size: 18px; font-weight: 900; color: var(--primary-black); text-shadow: 0 0 0 transparent; }
body.dark-mode .collab-title { color: #fff; text-shadow: 0 1px 0 rgba(0,0,0,0.25); }
.collab-meta { display:flex; flex-wrap: wrap; gap:8px; }
.collab-tag { font-size: 12px; font-weight: 900; border: 3px solid var(--primary-black); border-radius: 999px; padding: 3px 8px; background: #fff; }
/* Fix: ensure tag text is visible in dark mode */
body.dark-mode .collab-tag { background: var(--primary-white); color: var(--primary-black); }
.collab-desc { font-size: 14px; color: var(--gray-500); }
body.dark-mode .collab-desc { color: #e6e6e6; }
.collab-actions { margin-top: 6px; }
/* Button contrast in collab cards */
body.dark-mode .collab-actions .btn.btn-outline { color:#fff; border-color:#fff; }
body.dark-mode .collab-actions .btn.btn-outline:hover { background:#fff; color:#000; }

/* Generic safeguard: many of our components use white "paper" blocks. In dark mode,
     ensure any block with common class tokens keeps black text for readability. */
body.dark-mode [class*="card"],
body.dark-mode [class*="panel"],
body.dark-mode [class*="box"],
body.dark-mode [class*="bubble"],
body.dark-mode [class*="chip"],
body.dark-mode [class*="tag"],
body.dark-mode [class*="pill"] {
    color: #000;
}

/* Form fields: inputs are white by design; keep text dark in dark mode */
body.dark-mode input,
body.dark-mode textarea,
body.dark-mode select { color:#000; }
body.dark-mode input::placeholder,
body.dark-mode textarea::placeholder { color:#666; }
.collab-tape{ position:absolute; top:8px; right:-10px; transform: rotate(8deg); background: linear-gradient(transparent, transparent) padding-box, repeating-linear-gradient(45deg, rgba(0,0,0,0.1) 0 6px, rgba(0,0,0,0) 6px 12px) border-box, #fffbcc; border: 2px solid var(--primary-black); padding: 4px 12px; font-weight: 900; border-radius: 8px; box-shadow: 4px 4px 0 0 var(--primary-black); }
.dark-mode .collab-tape{ background: linear-gradient(transparent, transparent) padding-box, repeating-linear-gradient(45deg, rgba(255,255,255,0.15) 0 6px, rgba(255,255,255,0) 6px 12px) border-box, #4a4a25; }

/* Collab detail section */
.collab-detail { padding: 60px 0; background: var(--primary-white); }
.collab-hero { display:grid; grid-template-columns: 1.2fr 1fr; gap: 20px; align-items: center; margin-bottom: 20px; }
.collab-hero-media{ border:3px solid var(--primary-black); border-radius:14px; overflow:hidden; background:#000; box-shadow:8px 8px 0 0 var(--primary-black); }
.collab-hero-media img{ display:block; width:100%; height:auto; object-fit: cover; }
.collab-hero-copy{ border:3px solid var(--primary-black); border-radius:14px; padding:16px; background:#fff; box-shadow:8px 8px 0 0 var(--primary-black); font-weight:700; }
/* Global paper contrast fixes (dark mode): ensure white panels keep black text */
body.dark-mode .auth-chip,
body.dark-mode .floating-sfx,
body.dark-mode .facet-bar select,
body.dark-mode .badge,
body.dark-mode .people-heading .people-jp,
body.dark-mode .person-card,
body.dark-mode .blog-card,
body.dark-mode .tag-pill,
body.dark-mode .blog-article,
body.dark-mode .lookbook-filter .btn,
body.dark-mode .look-card,
body.dark-mode .lookbox-panel,
body.dark-mode .ugc-form,
body.dark-mode .tile,
body.dark-mode .category-hero .ch-tag,
body.dark-mode .category-hero .ch-art,
body.dark-mode .collab-hero-copy,
body.dark-mode .compare-table th,
body.dark-mode .compare-table td {
    color: #000;
}

/* Also keep borders readable on paper elements in dark mode */
body.dark-mode .auth-chip,
body.dark-mode .facet-bar select,
body.dark-mode .badge,
body.dark-mode .person-card,
body.dark-mode .blog-card,
body.dark-mode .blog-article,
body.dark-mode .look-card,
body.dark-mode .lookbox-panel,
body.dark-mode .ugc-form,
body.dark-mode .tile,
body.dark-mode .category-hero .ch-tag,
body.dark-mode .category-hero .ch-art,
body.dark-mode .collab-hero-copy,
body.dark-mode .compare-table th,
body.dark-mode .compare-table td {
    border-color: #000;
}
.collab-members-grid{ display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:16px; }
@media (max-width: 1100px){ .collab-hero{ grid-template-columns:1fr; } .collab-members-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 560px){ .collab-members-grid{ grid-template-columns: 1fr; } }
.member-card .product-image{ height:220px; padding:16px; }
.member-card .product-image img{ width:100%; height:100%; object-fit: contain; object-position: center bottom; }